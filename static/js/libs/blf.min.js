/* BibLib Web front-end */
!function(){function a(a,b){if(!b||"function"==typeof b)return a;for(var c in b)a[c]=b[c];return a}function b(a,b,c){var d,e=0,f=a.length,g=void 0===f||"function"==typeof a;if(c)if(g){for(d in a)if(b.apply(a[d],c)===!1)break}else for(;f>e&&b.apply(a[e++],c)!==!1;);else if(g){for(d in a)if(b.call(a[d],d,a[d])===!1)break}else for(;f>e&&b.call(a[e],e,a[e++])!==!1;);return a}function c(a){return"string"==typeof a?a.replace(/[&<>"'\/]/g,function(a){return F[a]}):a}function d(a){var b=function(a){if(window.XMLHttpRequest)return a(null,new XMLHttpRequest);if(window.ActiveXObject)try{return a(null,new ActiveXObject("Msxml2.XMLHTTP"))}catch(b){return a(null,new ActiveXObject("Microsoft.XMLHTTP"))}return a(Error())},c=function(a){if("string"==typeof a)return a;var b=[];for(var c in a)a.hasOwnProperty(c)&&b.push(encodeURIComponent(c)+"="+encodeURIComponent(a[c]));return b.join("&")},d=function(a){a=a.replace(/\r\n/g,"\n");for(var b="",c=0;a.length>c;c++){var d=a.charCodeAt(c);128>d?b+=String.fromCharCode(d):d>127&&2048>d?(b+=String.fromCharCode(192|d>>6),b+=String.fromCharCode(128|63&d)):(b+=String.fromCharCode(224|d>>12),b+=String.fromCharCode(128|63&d>>6),b+=String.fromCharCode(128|63&d))}return b},e=function(a){var b="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";a=d(a);var c,e,f,g,h,i,j,k="",l=0;do c=a.charCodeAt(l++),e=a.charCodeAt(l++),f=a.charCodeAt(l++),g=c>>2,h=(3&c)<<4|e>>4,i=(15&e)<<2|f>>6,j=63&f,isNaN(e)?i=j=64:isNaN(f)&&(j=64),k+=b.charAt(g)+b.charAt(h)+b.charAt(i)+b.charAt(j),c=e=f="",g=h=i=j="";while(a.length>l);return k},f=function(){for(var a=arguments[0],b=1;arguments.length>b;b++){var c=arguments[b];for(var d in c)c.hasOwnProperty(d)&&(a[d]=c[d])}return a},g=function(a,d,e,h){"function"==typeof e&&(h=e,e={}),e.cache=e.cache||!1,e.data=e.data||{},e.headers=e.headers||{},e.jsonp=e.jsonp||!1,e.async=void 0===e.async?!0:e.async;var i,j=f({accept:"*/*","content-type":"application/x-www-form-urlencoded;charset=UTF-8"},g.headers,e.headers);if(i="application/json"===j["content-type"]?JSON.stringify(e.data):c(e.data),"GET"===a){var k=[];if(i&&(k.push(i),i=null),e.cache||k.push("_="+(new Date).getTime()),e.jsonp&&(k.push("callback="+e.jsonp),k.push("jsonp="+e.jsonp)),k=k.join("&"),k.length>1&&(d+=d.indexOf("?")>-1?"&"+k:"?"+k),e.jsonp){var l=document.getElementsByTagName("head")[0],m=document.createElement("script");return m.type="text/javascript",m.src=d,void l.appendChild(m)}}b(function(b,c){if(b)return h(b);c.open(a,d,e.async);for(var f in j)j.hasOwnProperty(f)&&c.setRequestHeader(f,j[f]);c.onreadystatechange=function(){if(4===c.readyState){var a=c.responseText||"";if(!h)return;h(c.status,{text:function(){return a},json:function(){return JSON.parse(a)}})}},c.send(i)})},h={authBasic:function(a,b){g.headers.Authorization="Basic "+e(a+":"+b)},connect:function(a,b,c){return g("CONNECT",a,b,c)},del:function(a,b,c){return g("DELETE",a,b,c)},get:function(a,b,c){return g("GET",a,b,c)},head:function(a,b,c){return g("HEAD",a,b,c)},headers:function(a){g.headers=a||{}},isAllowed:function(a,b,c){this.options(a,function(a,d){c(-1!==d.text().indexOf(b))})},options:function(a,b,c){return g("OPTIONS",a,b,c)},patch:function(a,b,c){return g("PATCH",a,b,c)},post:function(a,b,c){return g("POST",a,b,c)},put:function(a,b,c){return g("PUT",a,b,c)},trace:function(a,b,c){return g("TRACE",a,b,c)}},i=a.type?a.type.toLowerCase():"get";h[i](a.url,a,function(b,c){200===b?a.success(c.json(),b,null):a.error(c.text(),b,null)})}function e(a,b){"function"==typeof a&&(b=a,a={}),a=a||{},I.extend(E,a),"string"==typeof E.ns&&(E.ns={namespaces:[E.ns],defaultNs:E.ns}),"string"==typeof E.fallbackNS&&(E.fallbackNS=[E.fallbackNS]),E.interpolationPrefixEscaped=I.regexEscape(E.interpolationPrefix),E.interpolationSuffixEscaped=I.regexEscape(E.interpolationSuffix),E.lng||(E.lng=I.detectLanguage()),E.lng?E.useCookie&&I.cookie.create(E.cookieName,E.lng,E.cookieExpirationTime):(E.lng=E.fallbackLng,E.useCookie&&I.cookie.remove(E.cookieName)),D=I.toLanguages(E.lng),x=D[0],I.log("currentLng set to: "+x),K.setCurrentLng(x),z&&E.setJqueryExt&&m();var c;if(z&&z.Deferred&&(c=z.Deferred()),!E.resStore){var d=I.toLanguages(E.lng);"string"==typeof E.preload&&(E.preload=[E.preload]);for(var e=0,f=E.preload.length;f>e;e++)for(var g=I.toLanguages(E.preload[e]),h=0,i=g.length;i>h;h++)0>d.indexOf(g[h])&&d.push(g[h]);return A.sync.load(d,E,function(a,d){B=d,b&&b(s),c&&c.resolve()}),c?c.promise():void 0}return B=E.resStore,b&&b(s),c&&c.resolve(),c?c.promise():void 0}function f(a,b){"string"==typeof a&&(a=[a]);for(var c=0,d=a.length;d>c;c++)0>E.preload.indexOf(a[c])&&E.preload.push(a[c]);return e(b)}function g(a,b,c){"string"!=typeof b?(c=b,b=E.ns.defaultNs):0>E.ns.namespaces.indexOf(b)&&E.ns.namespaces.push(b),B[a]=B[a]||{},B[a][b]=B[a][b]||{},I.extend(B[a][b],c)}function h(a){E.ns.defaultNs=a}function i(a,b){j([a],b)}function j(a,b){var c={dynamicLoad:E.dynamicLoad,resGetPath:E.resGetPath,getAsync:E.getAsync,customLoad:E.customLoad,ns:{namespaces:a,defaultNs:""}},d=I.toLanguages(E.lng);"string"==typeof E.preload&&(E.preload=[E.preload]);for(var e=0,f=E.preload.length;f>e;e++)for(var g=I.toLanguages(E.preload[e]),h=0,i=g.length;i>h;h++)0>d.indexOf(g[h])&&d.push(g[h]);for(var j=[],k=0,l=d.length;l>k;k++){var m=!1,n=B[d[k]];if(n)for(var o=0,p=a.length;p>o;o++)n[a[o]]||(m=!0);else m=!0;m&&j.push(d[k])}j.length?A.sync._fetch(j,c,function(c,d){var e=a.length*j.length;I.each(a,function(a,c){0>E.ns.namespaces.indexOf(c)&&E.ns.namespaces.push(c),I.each(j,function(a,f){B[f]=B[f]||{},B[f][c]=d[f][c],e--,0===e&&b&&(E.useLocalStorage&&A.sync._storeLocal(B),b())})})}):b&&b()}function k(a,b){return e({lng:a},b)}function l(){return x}function m(){function a(a,b,c){if(0!==b.length){var d="text";if(0===b.indexOf("[")){var e=b.split("]");b=e[1],d=e[0].substr(1,e[0].length-1)}b.indexOf(";")===b.length-1&&(b=b.substr(0,b.length-2));var f;"html"===d?(f=E.defaultValueFromContent?z.extend({defaultValue:a.html()},c):c,a.html(z.t(b,f))):"text"===d?(f=E.defaultValueFromContent?z.extend({defaultValue:a.text()},c):c,a.text(z.t(b,f))):(f=E.defaultValueFromContent?z.extend({defaultValue:a.attr(d)},c):c,a.attr(d,z.t(b,f)))}}function b(b,c){var d=b.attr(E.selectorAttr);if(d){var e=b,f=b.data("i18n-target");if(f&&(e=b.find(f)||b),c||E.useDataAttrOptions!==!0||(c=b.data("i18n-options")),c=c||{},d.indexOf(";")>=0){var g=d.split(";");z.each(g,function(b,d){""!==d&&a(e,d,c)})}else a(e,d,c);E.useDataAttrOptions===!0&&b.data("i18n-options",c)}}z.t=z.t||s,z.fn.i18n=function(a){return this.each(function(){b(z(this),a);var c=z(this).find("["+E.selectorAttr+"]");c.each(function(){b(z(this),a)})})}}function n(a,b,c,d){if(!a)return a;if(d=d||b,0>a.indexOf(d.interpolationPrefix||E.interpolationPrefix))return a;var e=d.interpolationPrefix?I.regexEscape(d.interpolationPrefix):E.interpolationPrefixEscaped,f=d.interpolationSuffix?I.regexEscape(d.interpolationSuffix):E.interpolationSuffixEscaped,g="HTML"+f;return I.each(b,function(b,h){var i=c?c+E.keyseparator+b:b;"object"==typeof h&&null!==h?a=n(a,h,i,d):d.escapeInterpolation||E.escapeInterpolation?(a=a.replace(RegExp([e,i,g].join(""),"g"),h),a=a.replace(RegExp([e,i,f].join(""),"g"),I.escape(h))):a=a.replace(RegExp([e,i,f].join(""),"g"),h)}),a}function o(a,b){var c=",",d="{",e="}",f=I.extend({},b);for(delete f.postProcess;-1!=a.indexOf(E.reusePrefix)&&(C++,!(C>E.maxRecursion));){var g=a.lastIndexOf(E.reusePrefix),h=a.indexOf(E.reuseSuffix,g)+E.reuseSuffix.length,i=a.substring(g,h),j=i.replace(E.reusePrefix,"").replace(E.reuseSuffix,"");if(-1!=j.indexOf(c)){var k=j.indexOf(c);if(-1!=j.indexOf(d,k)&&-1!=j.indexOf(e,k)){var l=j.indexOf(d,k),m=j.indexOf(e,l)+e.length;try{f=I.extend(f,JSON.parse(j.substring(l,m))),j=j.substring(0,k)}catch(n){}}}var o=u(j,f);a=a.replace(i,o)}return a}function p(a){return a.context&&"string"==typeof a.context}function q(a){return void 0!==a.count&&"string"!=typeof a.count&&1!==a.count}function r(a,b){b=b||{};var c=b.defaultValue||a,d=v(a,b);return void 0!==d||d===c}function s(){return C=0,u.apply(null,arguments)}function t(){for(var a=[],b=1;arguments.length>b;b++)a.push(arguments[b]);return{postProcess:"sprintf",sprintf:a}}function u(a,b){b="string"==typeof b?t.apply(null,arguments):b||{};var c,d=b.defaultValue||a,e=v(a,b),f=b.lng?I.toLanguages(b.lng):D,g=b.ns||E.ns.defaultNs;a.indexOf(E.nsseparator)>-1&&(c=a.split(E.nsseparator),g=c[0],a=c[1]),void 0===e&&E.sendMissing&&(b.lng?J.postMissing(f[0],g,a,d,f):J.postMissing(E.lng,g,a,d,f));var h=b.postProcess||E.postProcess;void 0!==e&&h&&L[h]&&(e=L[h](e,a,b));var i=d;if(d.indexOf(E.nsseparator)>-1&&(c=d.split(E.nsseparator),i=c[1]),i===a&&E.parseMissingKey&&(d=E.parseMissingKey(d)),void 0===e&&(d=n(d,b),d=o(d,b),h&&L[h])){var j=b.defaultValue||a;e=L[h](j,a,b)}return void 0!==e?e:d}function v(a,b){b=b||{};var c,d,e=b.defaultValue||a,f=D;if(!B)return e;if(b.lng&&(f=I.toLanguages(b.lng),!B[f[0]])){var g=E.getAsync;E.getAsync=!1,A.sync.load(f,E,function(a,b){I.extend(B,b),E.getAsync=g})}var h=b.ns||E.ns.defaultNs;if(a.indexOf(E.nsseparator)>-1){var i=a.split(E.nsseparator);h=i[0],a=i[1]}if(p(b)){c=I.extend({},b),delete c.context,c.defaultValue=E.contextNotFound;var j=h+E.nsseparator+a+"_"+b.context;if(d=s(j,c),d!=E.contextNotFound)return n(d,{context:b.context})}if(q(b)){c=I.extend({},b),delete c.count,c.defaultValue=E.pluralNotFound;var k=h+E.nsseparator+a+E.pluralSuffix,l=K.get(f[0],b.count);if(l>=0?k=k+"_"+l:1===l&&(k=h+E.nsseparator+a),d=s(k,c),d!=E.pluralNotFound)return n(d,{count:b.count,interpolationPrefix:b.interpolationPrefix,interpolationSuffix:b.interpolationSuffix})}for(var m,r=a.split(E.keyseparator),t=0,w=f.length;w>t&&void 0===m;t++){for(var x=f[t],y=0,z=B[x]&&B[x][h];r[y];)z=z&&z[r[y]],y++;if(void 0!==z){if("string"==typeof z)z=n(z,b),z=o(z,b);else if("[object Array]"!==Object.prototype.toString.apply(z)||E.returnObjectTrees||b.returnObjectTrees){if(null===z&&E.fallbackOnNull===!0)z=void 0;else if(null!==z)if(E.returnObjectTrees||b.returnObjectTrees){var C={};for(var F in z)C[F]=u(h+E.nsseparator+a+E.keyseparator+F,b);z=C}else z="key '"+h+":"+a+" ("+x+")' returned a object instead of string.",I.log(z)}else z=z.join("\n"),z=n(z,b),z=o(z,b);m=z}}if(void 0===m&&!b.isFallbackLookup&&(E.fallbackToDefaultNS===!0||E.fallbackNS&&E.fallbackNS.length>0))if(b.isFallbackLookup=!0,E.fallbackNS.length){for(var G=0,H=E.fallbackNS.length;H>G;G++)if(m=v(E.fallbackNS[G]+E.nsseparator+a,b)){var J=m.indexOf(E.nsseparator)>-1?m.split(E.nsseparator)[1]:m,L=e.indexOf(E.nsseparator)>-1?e.split(E.nsseparator)[1]:e;if(J!==L)break}}else m=v(a,b);return m}function w(){var a,b=[];if("undefined"!=typeof window&&(function(){for(var a=window.location.search.substring(1),c=a.split("&"),d=0;c.length>d;d++){var e=c[d].indexOf("=");if(e>0){var f=c[d].substring(0,e),g=c[d].substring(e+1);b[f]=g}}}(),b[E.detectLngQS]&&(a=b[E.detectLngQS])),!a&&"undefined"!=typeof document&&E.useCookie){var c=I.cookie.read(E.cookieName);c&&(a=c)}return a||"undefined"==typeof navigator||(a=navigator.language?navigator.language:navigator.userLanguage),a}Array.prototype.indexOf||(Array.prototype.indexOf=function(a){"use strict";if(null==this)throw new TypeError;var b=Object(this),c=b.length>>>0;if(0===c)return-1;var d=0;if(arguments.length>0&&(d=Number(arguments[1]),d!=d?d=0:0!=d&&1/0!=d&&d!=-1/0&&(d=(d>0||-1)*Math.floor(Math.abs(d)))),d>=c)return-1;for(var e=d>=0?d:Math.max(c-Math.abs(d),0);c>e;e++)if(e in b&&b[e]===a)return e;return-1}),Array.prototype.lastIndexOf||(Array.prototype.lastIndexOf=function(a){"use strict";if(null==this)throw new TypeError;var b=Object(this),c=b.length>>>0;if(0===c)return-1;var d=c;arguments.length>1&&(d=Number(arguments[1]),d!=d?d=0:0!=d&&d!=1/0&&d!=-(1/0)&&(d=(d>0||-1)*Math.floor(Math.abs(d))));for(var e=d>=0?Math.min(d,c-1):c-Math.abs(d);e>=0;e--)if(e in b&&b[e]===a)return e;return-1});var x,y=this,z=y.jQuery||y.Zepto,A={},B={},C=0,D=[];"undefined"!=typeof module&&module.exports?module.exports=A:(z&&(z.i18n=z.i18n||A),y.i18n=y.i18n||A);var E={lng:void 0,load:"all",preload:[],lowerCaseLng:!1,returnObjectTrees:!1,fallbackLng:"dev",fallbackNS:[],detectLngQS:"setLng",ns:"translation",fallbackOnNull:!0,fallbackToDefaultNS:!1,nsseparator:":",keyseparator:".",selectorAttr:"data-i18n",debug:!1,resGetPath:"locales/__lng__/__ns__.json",resPostPath:"locales/add/__lng__/__ns__",getAsync:!0,postAsync:!0,resStore:void 0,useLocalStorage:!1,localStorageExpirationTime:6048e5,dynamicLoad:!1,sendMissing:!1,sendMissingTo:"fallback",sendType:"POST",interpolationPrefix:"__",interpolationSuffix:"__",reusePrefix:"$t(",reuseSuffix:")",pluralSuffix:"_plural",pluralNotFound:["plural_not_found",Math.random()].join(""),contextNotFound:["context_not_found",Math.random()].join(""),escapeInterpolation:!1,setJqueryExt:!0,defaultValueFromContent:!0,useDataAttrOptions:!1,cookieExpirationTime:void 0,useCookie:!0,cookieName:"i18next",postProcess:void 0,parseMissingKey:void 0},F={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"},G={create:function(a,b,c){var d;if(c){var e=new Date;e.setTime(e.getTime()+6e4*c),d="; expires="+e.toGMTString()}else d="";document.cookie=a+"="+b+d+"; path=/"},read:function(a){for(var b=a+"=",c=document.cookie.split(";"),d=0;c.length>d;d++){for(var e=c[d];" "==e.charAt(0);)e=e.substring(1,e.length);if(0===e.indexOf(b))return e.substring(b.length,e.length)}return null},remove:function(a){this.create(a,"",-1)}},H={create:function(){},read:function(){return null},remove:function(){}},I={extend:z?z.extend:a,each:z?z.each:b,ajax:z?z.ajax:d,cookie:"undefined"!=typeof document?G:H,detectLanguage:w,escape:c,log:function(a){E.debug&&"undefined"!=typeof console&&console.log(a)},toLanguages:function(a){var b=[];if("string"==typeof a&&a.indexOf("-")>-1){var c=a.split("-");a=E.lowerCaseLng?c[0].toLowerCase()+"-"+c[1].toLowerCase():c[0].toLowerCase()+"-"+c[1].toUpperCase(),"unspecific"!==E.load&&b.push(a),"current"!==E.load&&b.push(c[0])}else b.push(a);return-1===b.indexOf(E.fallbackLng)&&E.fallbackLng&&b.push(E.fallbackLng),b},regexEscape:function(a){return a.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}};I.applyReplacement=n;var J={load:function(a,b,c){b.useLocalStorage?J._loadLocal(a,b,function(d,e){for(var f=[],g=0,h=a.length;h>g;g++)e[a[g]]||f.push(a[g]);f.length>0?J._fetch(f,b,function(a,b){I.extend(e,b),J._storeLocal(b),c(null,e)}):c(null,e)}):J._fetch(a,b,function(a,b){c(null,b)})},_loadLocal:function(a,b,c){var d={},e=(new Date).getTime();if(window.localStorage){var f=a.length;I.each(a,function(a,g){var h=window.localStorage.getItem("res_"+g);h&&(h=JSON.parse(h),h.i18nStamp&&h.i18nStamp+b.localStorageExpirationTime>e&&(d[g]=h)),f--,0===f&&c(null,d)})}},_storeLocal:function(a){if(window.localStorage)for(var b in a)a[b].i18nStamp=(new Date).getTime(),window.localStorage.setItem("res_"+b,JSON.stringify(a[b]))},_fetch:function(a,b,c){var d=b.ns,e={};if(b.dynamicLoad){var f=function(a,b){c(null,b)};if("function"==typeof b.customLoad)b.customLoad(a,d.namespaces,b,f);else{var g=n(b.resGetPath,{lng:a.join("+"),ns:d.namespaces.join("+")});I.ajax({url:g,success:function(a){I.log("loaded: "+g),f(null,a)},error:function(a,b,c){I.log("failed loading: "+g),f("failed loading resource.json error: "+c)},dataType:"json",async:b.getAsync})}}else{var h,i=d.namespaces.length*a.length;I.each(d.namespaces,function(d,f){I.each(a,function(a,d){var g=function(a,b){a&&(h=h||[],h.push(a)),e[d]=e[d]||{},e[d][f]=b,i--,0===i&&c(h,e)};"function"==typeof b.customLoad?b.customLoad(d,f,b,g):J._fetchOne(d,f,b,g)})})}},_fetchOne:function(a,b,c,d){var e=n(c.resGetPath,{lng:a,ns:b});I.ajax({url:e,success:function(a){I.log("loaded: "+e),d(null,a)},error:function(a,b,c){I.log("failed loading: "+e),d(c,{})},dataType:"json",async:c.getAsync})},postMissing:function(a,b,c,d,e){var f={};f[c]=d;var g=[];if("fallback"===E.sendMissingTo&&E.fallbackLng!==!1)g.push({lng:E.fallbackLng,url:n(E.resPostPath,{lng:E.fallbackLng,ns:b})});else if("current"===E.sendMissingTo||"fallback"===E.sendMissingTo&&E.fallbackLng===!1)g.push({lng:a,url:n(E.resPostPath,{lng:a,ns:b})});else if("all"===E.sendMissingTo)for(var h=0,i=e.length;i>h;h++)g.push({lng:e[h],url:n(E.resPostPath,{lng:e[h],ns:b})});for(var j=0,k=g.length;k>j;j++){var l=g[j];I.ajax({url:l.url,type:E.sendType,data:f,success:function(){I.log("posted missing key '"+c+"' to: "+l.url);for(var a=c.split("."),e=0,f=B[l.lng][b];a[e];)f=f[a[e]]=e===a.length-1?d:f[a[e]]||{},e++},error:function(){I.log("failed posting missing key '"+c+"' to: "+l.url)},dataType:"json",async:E.postAsync})}}},K={rules:{ach:{name:"Acholi",numbers:[1,2],plurals:function(a){return Number(a>1)}},af:{name:"Afrikaans",numbers:[1,2],plurals:function(a){return Number(1!=a)}},ak:{name:"Akan",numbers:[1,2],plurals:function(a){return Number(a>1)}},am:{name:"Amharic",numbers:[1,2],plurals:function(a){return Number(a>1)}},an:{name:"Aragonese",numbers:[1,2],plurals:function(a){return Number(1!=a)}},ar:{name:"Arabic",numbers:[0,1,2,3,11,100],plurals:function(a){return Number(0===a?0:1==a?1:2==a?2:a%100>=3&&10>=a%100?3:a%100>=11?4:5)}},arn:{name:"Mapudungun",numbers:[1,2],plurals:function(a){return Number(a>1)}},ast:{name:"Asturian",numbers:[1,2],plurals:function(a){return Number(1!=a)}},ay:{name:"Aymará",numbers:[1],plurals:function(){return 0}},az:{name:"Azerbaijani",numbers:[1,2],plurals:function(a){return Number(1!=a)}},be:{name:"Belarusian",numbers:[1,2,5],plurals:function(a){return Number(1==a%10&&11!=a%100?0:a%10>=2&&4>=a%10&&(10>a%100||a%100>=20)?1:2)}},bg:{name:"Bulgarian",numbers:[1,2],plurals:function(a){return Number(1!=a)}},bn:{name:"Bengali",numbers:[1,2],plurals:function(a){return Number(1!=a)}},bo:{name:"Tibetan",numbers:[1],plurals:function(){return 0}},br:{name:"Breton",numbers:[1,2],plurals:function(a){return Number(a>1)}},bs:{name:"Bosnian",numbers:[1,2,5],plurals:function(a){return Number(1==a%10&&11!=a%100?0:a%10>=2&&4>=a%10&&(10>a%100||a%100>=20)?1:2)}},ca:{name:"Catalan",numbers:[1,2],plurals:function(a){return Number(1!=a)}},cgg:{name:"Chiga",numbers:[1],plurals:function(){return 0}},cs:{name:"Czech",numbers:[1,2,5],plurals:function(a){return Number(1==a?0:a>=2&&4>=a?1:2)}},csb:{name:"Kashubian",numbers:[1,2,5],plurals:function(a){return Number(1==a?0:a%10>=2&&4>=a%10&&(10>a%100||a%100>=20)?1:2)}},cy:{name:"Welsh",numbers:[1,2,3,8],plurals:function(a){return Number(1==a?0:2==a?1:8!=a&&11!=a?2:3)}},da:{name:"Danish",numbers:[1,2],plurals:function(a){return Number(1!=a)}},de:{name:"German",numbers:[1,2],plurals:function(a){return Number(1!=a)}},dz:{name:"Dzongkha",numbers:[1],plurals:function(){return 0}},el:{name:"Greek",numbers:[1,2],plurals:function(a){return Number(1!=a)}},en:{name:"English",numbers:[1,2],plurals:function(a){return Number(1!=a)}},eo:{name:"Esperanto",numbers:[1,2],plurals:function(a){return Number(1!=a)}},es:{name:"Spanish",numbers:[1,2],plurals:function(a){return Number(1!=a)}},es_ar:{name:"Argentinean Spanish",numbers:[1,2],plurals:function(a){return Number(1!=a)}},et:{name:"Estonian",numbers:[1,2],plurals:function(a){return Number(1!=a)}},eu:{name:"Basque",numbers:[1,2],plurals:function(a){return Number(1!=a)}},fa:{name:"Persian",numbers:[1],plurals:function(){return 0}},fi:{name:"Finnish",numbers:[1,2],plurals:function(a){return Number(1!=a)}},fil:{name:"Filipino",numbers:[1,2],plurals:function(a){return Number(a>1)}},fo:{name:"Faroese",numbers:[1,2],plurals:function(a){return Number(1!=a)}},fr:{name:"French",numbers:[1,2],plurals:function(a){return Number(a>1)}},fur:{name:"Friulian",numbers:[1,2],plurals:function(a){return Number(1!=a)}},fy:{name:"Frisian",numbers:[1,2],plurals:function(a){return Number(1!=a)}},ga:{name:"Irish",numbers:[1,2,3,7,11],plurals:function(a){return Number(1==a?0:2==a?1:7>a?2:11>a?3:4)}},gd:{name:"Scottish Gaelic",numbers:[1,2,3,20],plurals:function(a){return Number(1==a||11==a?0:2==a||12==a?1:a>2&&20>a?2:3)}},gl:{name:"Galician",numbers:[1,2],plurals:function(a){return Number(1!=a)}},gu:{name:"Gujarati",numbers:[1,2],plurals:function(a){return Number(1!=a)}},gun:{name:"Gun",numbers:[1,2],plurals:function(a){return Number(a>1)}},ha:{name:"Hausa",numbers:[1,2],plurals:function(a){return Number(1!=a)}},he:{name:"Hebrew",numbers:[1,2],plurals:function(a){return Number(1!=a)}},hi:{name:"Hindi",numbers:[1,2],plurals:function(a){return Number(1!=a)}},hr:{name:"Croatian",numbers:[1,2,5],plurals:function(a){return Number(1==a%10&&11!=a%100?0:a%10>=2&&4>=a%10&&(10>a%100||a%100>=20)?1:2)}},hu:{name:"Hungarian",numbers:[1,2],plurals:function(a){return Number(1!=a)}},hy:{name:"Armenian",numbers:[1,2],plurals:function(a){return Number(1!=a)}},ia:{name:"Interlingua",numbers:[1,2],plurals:function(a){return Number(1!=a)}},id:{name:"Indonesian",numbers:[1],plurals:function(){return 0}},is:{name:"Icelandic",numbers:[1,2],plurals:function(a){return Number(1!=a%10||11==a%100)}},it:{name:"Italian",numbers:[1,2],plurals:function(a){return Number(1!=a)}},ja:{name:"Japanese",numbers:[1],plurals:function(){return 0}},jbo:{name:"Lojban",numbers:[1],plurals:function(){return 0}},jv:{name:"Javanese",numbers:[0,1],plurals:function(a){return Number(0!==a)}},ka:{name:"Georgian",numbers:[1],plurals:function(){return 0}},kk:{name:"Kazakh",numbers:[1],plurals:function(){return 0}},km:{name:"Khmer",numbers:[1],plurals:function(){return 0}},kn:{name:"Kannada",numbers:[1,2],plurals:function(a){return Number(1!=a)}},ko:{name:"Korean",numbers:[1],plurals:function(){return 0}},ku:{name:"Kurdish",numbers:[1,2],plurals:function(a){return Number(1!=a)}},kw:{name:"Cornish",numbers:[1,2,3,4],plurals:function(a){return Number(1==a?0:2==a?1:3==a?2:3)}},ky:{name:"Kyrgyz",numbers:[1],plurals:function(){return 0}},lb:{name:"Letzeburgesch",numbers:[1,2],plurals:function(a){return Number(1!=a)}},ln:{name:"Lingala",numbers:[1,2],plurals:function(a){return Number(a>1)}},lo:{name:"Lao",numbers:[1],plurals:function(){return 0}},lt:{name:"Lithuanian",numbers:[1,2,10],plurals:function(a){return Number(1==a%10&&11!=a%100?0:a%10>=2&&(10>a%100||a%100>=20)?1:2)}},lv:{name:"Latvian",numbers:[0,1,2],plurals:function(a){return Number(1==a%10&&11!=a%100?0:0!==a?1:2)}},mai:{name:"Maithili",numbers:[1,2],plurals:function(a){return Number(1!=a)}},mfe:{name:"Mauritian Creole",numbers:[1,2],plurals:function(a){return Number(a>1)}},mg:{name:"Malagasy",numbers:[1,2],plurals:function(a){return Number(a>1)}},mi:{name:"Maori",numbers:[1,2],plurals:function(a){return Number(a>1)}},mk:{name:"Macedonian",numbers:[1,2],plurals:function(a){return Number(1==a||1==a%10?0:1)}},ml:{name:"Malayalam",numbers:[1,2],plurals:function(a){return Number(1!=a)}},mn:{name:"Mongolian",numbers:[1,2],plurals:function(a){return Number(1!=a)}},mnk:{name:"Mandinka",numbers:[0,1,2],plurals:function(a){return Number(1==a?1:2)}},mr:{name:"Marathi",numbers:[1,2],plurals:function(a){return Number(1!=a)}},ms:{name:"Malay",numbers:[1],plurals:function(){return 0}},mt:{name:"Maltese",numbers:[1,2,11,20],plurals:function(a){return Number(1==a?0:0===a||a%100>1&&11>a%100?1:a%100>10&&20>a%100?2:3)}},nah:{name:"Nahuatl",numbers:[1,2],plurals:function(a){return Number(1!=a)}},nap:{name:"Neapolitan",numbers:[1,2],plurals:function(a){return Number(1!=a)}},nb:{name:"Norwegian Bokmal",numbers:[1,2],plurals:function(a){return Number(1!=a)}},ne:{name:"Nepali",numbers:[1,2],plurals:function(a){return Number(1!=a)}},nl:{name:"Dutch",numbers:[1,2],plurals:function(a){return Number(1!=a)}},nn:{name:"Norwegian Nynorsk",numbers:[1,2],plurals:function(a){return Number(1!=a)}},no:{name:"Norwegian",numbers:[1,2],plurals:function(a){return Number(1!=a)}},nso:{name:"Northern Sotho",numbers:[1,2],plurals:function(a){return Number(1!=a)}},oc:{name:"Occitan",numbers:[1,2],plurals:function(a){return Number(a>1)}},or:{name:"Oriya",numbers:[2,1],plurals:function(a){return Number(1!=a)}},pa:{name:"Punjabi",numbers:[1,2],plurals:function(a){return Number(1!=a)}},pap:{name:"Papiamento",numbers:[1,2],plurals:function(a){return Number(1!=a)}},pl:{name:"Polish",numbers:[1,2,5],plurals:function(a){return Number(1==a?0:a%10>=2&&4>=a%10&&(10>a%100||a%100>=20)?1:2)}},pms:{name:"Piemontese",numbers:[1,2],plurals:function(a){return Number(1!=a)}},ps:{name:"Pashto",numbers:[1,2],plurals:function(a){return Number(1!=a)}},pt:{name:"Portuguese",numbers:[1,2],plurals:function(a){return Number(1!=a)}},pt_br:{name:"Brazilian Portuguese",numbers:[1,2],plurals:function(a){return Number(1!=a)}},rm:{name:"Romansh",numbers:[1,2],plurals:function(a){return Number(1!=a)}},ro:{name:"Romanian",numbers:[1,2,20],plurals:function(a){return Number(1==a?0:0===a||a%100>0&&20>a%100?1:2)}},ru:{name:"Russian",numbers:[1,2,5],plurals:function(a){return Number(1==a%10&&11!=a%100?0:a%10>=2&&4>=a%10&&(10>a%100||a%100>=20)?1:2)}},sah:{name:"Yakut",numbers:[1],plurals:function(){return 0}},sco:{name:"Scots",numbers:[1,2],plurals:function(a){return Number(1!=a)}},se:{name:"Northern Sami",numbers:[1,2],plurals:function(a){return Number(1!=a)}},si:{name:"Sinhala",numbers:[1,2],plurals:function(a){return Number(1!=a)}},sk:{name:"Slovak",numbers:[1,2,5],plurals:function(a){return Number(1==a?0:a>=2&&4>=a?1:2)}},sl:{name:"Slovenian",numbers:[5,1,2,3],plurals:function(a){return Number(1==a%100?1:2==a%100?2:3==a%100||4==a%100?3:0)}},so:{name:"Somali",numbers:[1,2],plurals:function(a){return Number(1!=a)}},son:{name:"Songhay",numbers:[1,2],plurals:function(a){return Number(1!=a)}},sq:{name:"Albanian",numbers:[1,2],plurals:function(a){return Number(1!=a)}},sr:{name:"Serbian",numbers:[1,2,5],plurals:function(a){return Number(1==a%10&&11!=a%100?0:a%10>=2&&4>=a%10&&(10>a%100||a%100>=20)?1:2)}},su:{name:"Sundanese",numbers:[1],plurals:function(){return 0}},sv:{name:"Swedish",numbers:[1,2],plurals:function(a){return Number(1!=a)}},sw:{name:"Swahili",numbers:[1,2],plurals:function(a){return Number(1!=a)}},ta:{name:"Tamil",numbers:[1,2],plurals:function(a){return Number(1!=a)}},te:{name:"Telugu",numbers:[1,2],plurals:function(a){return Number(1!=a)}},tg:{name:"Tajik",numbers:[1,2],plurals:function(a){return Number(a>1)}},th:{name:"Thai",numbers:[1],plurals:function(){return 0}},ti:{name:"Tigrinya",numbers:[1,2],plurals:function(a){return Number(a>1)}},tk:{name:"Turkmen",numbers:[1,2],plurals:function(a){return Number(1!=a)}},tr:{name:"Turkish",numbers:[1,2],plurals:function(a){return Number(a>1)}},tt:{name:"Tatar",numbers:[1],plurals:function(){return 0}},ug:{name:"Uyghur",numbers:[1],plurals:function(){return 0}},uk:{name:"Ukrainian",numbers:[1,2,5],plurals:function(a){return Number(1==a%10&&11!=a%100?0:a%10>=2&&4>=a%10&&(10>a%100||a%100>=20)?1:2)}},ur:{name:"Urdu",numbers:[1,2],plurals:function(a){return Number(1!=a)}},uz:{name:"Uzbek",numbers:[1,2],plurals:function(a){return Number(a>1)}},vi:{name:"Vietnamese",numbers:[1],plurals:function(){return 0}},wa:{name:"Walloon",numbers:[1,2],plurals:function(a){return Number(a>1)}},wo:{name:"Wolof",numbers:[1],plurals:function(){return 0}},yo:{name:"Yoruba",numbers:[1,2],plurals:function(a){return Number(1!=a)}},zh:{name:"Chinese",numbers:[1],plurals:function(){return 0}}},addRule:function(a,b){K.rules[a]=b},setCurrentLng:function(a){if(!K.currentRule||K.currentRule.lng!==a){var b=a.split("-");K.currentRule={lng:a,rule:K.rules[b[0]]}}},get:function(a,b){function c(b,c){var d;if(d=K.currentRule&&K.currentRule.lng===a?K.currentRule.rule:K.rules[b]){var e=d.plurals(c),f=d.numbers[e];return 2===d.numbers.length&&1===d.numbers[0]&&(2===f?f=-1:1===f&&(f=1)),f}return 1===c?"1":"-1"}var d=a.split("-");return c(d[0],b)}},L={},M=function(a,b){L[a]=b},N=function(){function a(a){return Object.prototype.toString.call(a).slice(8,-1).toLowerCase()}function b(a,b){for(var c=[];b>0;c[--b]=a);return c.join("")}var c=function(){return c.cache.hasOwnProperty(arguments[0])||(c.cache[arguments[0]]=c.parse(arguments[0])),c.format.call(null,c.cache[arguments[0]],arguments)};return c.format=function(c,d){var e,f,g,h,i,j,k,l=1,m=c.length,n="",o=[];for(f=0;m>f;f++)if(n=a(c[f]),"string"===n)o.push(c[f]);else if("array"===n){if(h=c[f],h[2])for(e=d[l],g=0;h[2].length>g;g++){if(!e.hasOwnProperty(h[2][g]))throw N('[sprintf] property "%s" does not exist',h[2][g]);e=e[h[2][g]]}else e=h[1]?d[h[1]]:d[l++];if(/[^s]/.test(h[8])&&"number"!=a(e))throw N("[sprintf] expecting number but found %s",a(e));switch(h[8]){case"b":e=e.toString(2);break;case"c":e=String.fromCharCode(e);break;case"d":e=parseInt(e,10);break;case"e":e=h[7]?e.toExponential(h[7]):e.toExponential();break;case"f":e=h[7]?parseFloat(e).toFixed(h[7]):parseFloat(e);break;case"o":e=e.toString(8);break;case"s":e=(e+="")&&h[7]?e.substring(0,h[7]):e;break;case"u":e=Math.abs(e);break;case"x":e=e.toString(16);break;case"X":e=e.toString(16).toUpperCase()}e=/[def]/.test(h[8])&&h[3]&&e>=0?"+"+e:e,j=h[4]?"0"==h[4]?"0":h[4].charAt(1):" ",k=h[6]-(e+"").length,i=h[6]?b(j,k):"",o.push(h[5]?e+i:i+e)}return o.join("")},c.cache={},c.parse=function(a){for(var b=a,c=[],d=[],e=0;b;){if(null!==(c=/^[^%]+/.exec(b)))d.push(c[0]);else if(null!==(c=/^%{2}/.exec(b)))d.push("%");else{if(null===(c=/^%(?:([1-9]\d*)\$|\(([^\)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-fosuxX])/.exec(b)))throw"[sprintf] huh?";if(c[2]){e|=1;var f=[],g=c[2],h=[];if(null===(h=/^([a-z_][a-z_\d]*)/i.exec(g)))throw"[sprintf] huh?";for(f.push(h[1]);""!==(g=g.substring(h[0].length));)if(null!==(h=/^\.([a-z_][a-z_\d]*)/i.exec(g)))f.push(h[1]);else{if(null===(h=/^\[(\d+)\]/.exec(g)))throw"[sprintf] huh?";f.push(h[1])}c[2]=f}else e|=2;if(3===e)throw"[sprintf] mixing positional and named placeholders is not (yet) supported";d.push(c)}b=b.substring(c[0].length)}return d},c}(),O=function(a,b){return b.unshift(a),N.apply(null,b)};M("sprintf",function(a,b,c){return c.sprintf?"[object Array]"===Object.prototype.toString.apply(c.sprintf)?O(a,c.sprintf):"object"==typeof c.sprintf?N(a,c.sprintf):a:a}),A.init=e,A.setLng=k,A.preload=f,A.addResourceBundle=g,A.loadNamespace=i,A.loadNamespaces=j,A.setDefaultNamespace=h,A.t=s,A.translate=s,A.exists=r,A.detectLanguage=I.detectLanguage,A.pluralExtensions=K,A.sync=J,A.functions=I,A.lng=l,A.addPostProcessor=M,A.options=E}();var Handlebars={};!function(a,b){a.VERSION="1.0.0",a.COMPILER_REVISION=4,a.REVISION_CHANGES={1:"<= 1.0.rc.2",2:"== 1.0.0-rc.3",3:"== 1.0.0-rc.4",4:">= 1.0.0"},a.helpers={},a.partials={};var c=Object.prototype.toString,d="[object Function]",e="[object Object]";a.registerHelper=function(b,d,f){if(c.call(b)===e){if(f||d)throw new a.Exception("Arg not supported with multiple helpers");a.Utils.extend(this.helpers,b)}else f&&(d.not=f),this.helpers[b]=d},a.registerPartial=function(b,d){c.call(b)===e?a.Utils.extend(this.partials,b):this.partials[b]=d},a.registerHelper("helperMissing",function(a){if(2===arguments.length)return b;throw new Error("Missing helper: '"+a+"'")}),a.registerHelper("blockHelperMissing",function(b,e){var f=e.inverse||function(){},g=e.fn,h=c.call(b);return h===d&&(b=b.call(this)),b===!0?g(this):b===!1||null==b?f(this):"[object Array]"===h?b.length>0?a.helpers.each(b,e):f(this):g(b)}),a.K=function(){},a.createFrame=Object.create||function(b){a.K.prototype=b;var c=new a.K;return a.K.prototype=null,c},a.logger={DEBUG:0,INFO:1,WARN:2,ERROR:3,level:3,methodMap:{0:"debug",1:"info",2:"warn",3:"error"},log:function(b,c){if(a.logger.level<=b){var d=a.logger.methodMap[b];"undefined"!=typeof console&&console[d]&&console[d].call(console,c)}}},a.log=function(b,c){a.logger.log(b,c)},a.registerHelper("each",function(b,e){var f,g=e.fn,h=e.inverse,i=0,j="",k=c.call(b);if(k===d&&(b=b.call(this)),e.data&&(f=a.createFrame(e.data)),b&&"object"==typeof b)if(b instanceof Array)for(var l=b.length;l>i;i++)f&&(f.index=i),j+=g(b[i],{data:f});else for(var m in b)b.hasOwnProperty(m)&&(f&&(f.key=m),j+=g(b[m],{data:f}),i++);return 0===i&&(j=h(this)),j}),a.registerHelper("if",function(b,e){var f=c.call(b);return f===d&&(b=b.call(this)),!b||a.Utils.isEmpty(b)?e.inverse(this):e.fn(this)}),a.registerHelper("unless",function(b,c){return a.helpers["if"].call(this,b,{fn:c.inverse,inverse:c.fn})}),a.registerHelper("with",function(b,e){var f=c.call(b);return f===d&&(b=b.call(this)),a.Utils.isEmpty(b)?void 0:e.fn(b)
}),a.registerHelper("log",function(b,c){var d=c.data&&null!=c.data.level?parseInt(c.data.level,10):1;a.log(d,b)});var f=function(){function a(){this.yy={}}var b={trace:function(){},yy:{},symbols_:{error:2,root:3,program:4,EOF:5,simpleInverse:6,statements:7,statement:8,openInverse:9,closeBlock:10,openBlock:11,mustache:12,partial:13,CONTENT:14,COMMENT:15,OPEN_BLOCK:16,inMustache:17,CLOSE:18,OPEN_INVERSE:19,OPEN_ENDBLOCK:20,path:21,OPEN:22,OPEN_UNESCAPED:23,CLOSE_UNESCAPED:24,OPEN_PARTIAL:25,partialName:26,params:27,hash:28,dataName:29,param:30,STRING:31,INTEGER:32,BOOLEAN:33,hashSegments:34,hashSegment:35,ID:36,EQUALS:37,DATA:38,pathSegments:39,SEP:40,$accept:0,$end:1},terminals_:{2:"error",5:"EOF",14:"CONTENT",15:"COMMENT",16:"OPEN_BLOCK",18:"CLOSE",19:"OPEN_INVERSE",20:"OPEN_ENDBLOCK",22:"OPEN",23:"OPEN_UNESCAPED",24:"CLOSE_UNESCAPED",25:"OPEN_PARTIAL",31:"STRING",32:"INTEGER",33:"BOOLEAN",36:"ID",37:"EQUALS",38:"DATA",40:"SEP"},productions_:[0,[3,2],[4,2],[4,3],[4,2],[4,1],[4,1],[4,0],[7,1],[7,2],[8,3],[8,3],[8,1],[8,1],[8,1],[8,1],[11,3],[9,3],[10,3],[12,3],[12,3],[13,3],[13,4],[6,2],[17,3],[17,2],[17,2],[17,1],[17,1],[27,2],[27,1],[30,1],[30,1],[30,1],[30,1],[30,1],[28,1],[34,2],[34,1],[35,3],[35,3],[35,3],[35,3],[35,3],[26,1],[26,1],[26,1],[29,2],[21,1],[39,3],[39,1]],performAction:function(a,b,c,d,e,f){var g=f.length-1;switch(e){case 1:return f[g-1];case 2:this.$=new d.ProgramNode([],f[g]);break;case 3:this.$=new d.ProgramNode(f[g-2],f[g]);break;case 4:this.$=new d.ProgramNode(f[g-1],[]);break;case 5:this.$=new d.ProgramNode(f[g]);break;case 6:this.$=new d.ProgramNode([],[]);break;case 7:this.$=new d.ProgramNode([]);break;case 8:this.$=[f[g]];break;case 9:f[g-1].push(f[g]),this.$=f[g-1];break;case 10:this.$=new d.BlockNode(f[g-2],f[g-1].inverse,f[g-1],f[g]);break;case 11:this.$=new d.BlockNode(f[g-2],f[g-1],f[g-1].inverse,f[g]);break;case 12:this.$=f[g];break;case 13:this.$=f[g];break;case 14:this.$=new d.ContentNode(f[g]);break;case 15:this.$=new d.CommentNode(f[g]);break;case 16:this.$=new d.MustacheNode(f[g-1][0],f[g-1][1]);break;case 17:this.$=new d.MustacheNode(f[g-1][0],f[g-1][1]);break;case 18:this.$=f[g-1];break;case 19:this.$=new d.MustacheNode(f[g-1][0],f[g-1][1],"&"===f[g-2][2]);break;case 20:this.$=new d.MustacheNode(f[g-1][0],f[g-1][1],!0);break;case 21:this.$=new d.PartialNode(f[g-1]);break;case 22:this.$=new d.PartialNode(f[g-2],f[g-1]);break;case 23:break;case 24:this.$=[[f[g-2]].concat(f[g-1]),f[g]];break;case 25:this.$=[[f[g-1]].concat(f[g]),null];break;case 26:this.$=[[f[g-1]],f[g]];break;case 27:this.$=[[f[g]],null];break;case 28:this.$=[[f[g]],null];break;case 29:f[g-1].push(f[g]),this.$=f[g-1];break;case 30:this.$=[f[g]];break;case 31:this.$=f[g];break;case 32:this.$=new d.StringNode(f[g]);break;case 33:this.$=new d.IntegerNode(f[g]);break;case 34:this.$=new d.BooleanNode(f[g]);break;case 35:this.$=f[g];break;case 36:this.$=new d.HashNode(f[g]);break;case 37:f[g-1].push(f[g]),this.$=f[g-1];break;case 38:this.$=[f[g]];break;case 39:this.$=[f[g-2],f[g]];break;case 40:this.$=[f[g-2],new d.StringNode(f[g])];break;case 41:this.$=[f[g-2],new d.IntegerNode(f[g])];break;case 42:this.$=[f[g-2],new d.BooleanNode(f[g])];break;case 43:this.$=[f[g-2],f[g]];break;case 44:this.$=new d.PartialNameNode(f[g]);break;case 45:this.$=new d.PartialNameNode(new d.StringNode(f[g]));break;case 46:this.$=new d.PartialNameNode(new d.IntegerNode(f[g]));break;case 47:this.$=new d.DataNode(f[g]);break;case 48:this.$=new d.IdNode(f[g]);break;case 49:f[g-2].push({part:f[g],separator:f[g-1]}),this.$=f[g-2];break;case 50:this.$=[{part:f[g]}]}},table:[{3:1,4:2,5:[2,7],6:3,7:4,8:6,9:7,11:8,12:9,13:10,14:[1,11],15:[1,12],16:[1,13],19:[1,5],22:[1,14],23:[1,15],25:[1,16]},{1:[3]},{5:[1,17]},{5:[2,6],7:18,8:6,9:7,11:8,12:9,13:10,14:[1,11],15:[1,12],16:[1,13],19:[1,19],20:[2,6],22:[1,14],23:[1,15],25:[1,16]},{5:[2,5],6:20,8:21,9:7,11:8,12:9,13:10,14:[1,11],15:[1,12],16:[1,13],19:[1,5],20:[2,5],22:[1,14],23:[1,15],25:[1,16]},{17:23,18:[1,22],21:24,29:25,36:[1,28],38:[1,27],39:26},{5:[2,8],14:[2,8],15:[2,8],16:[2,8],19:[2,8],20:[2,8],22:[2,8],23:[2,8],25:[2,8]},{4:29,6:3,7:4,8:6,9:7,11:8,12:9,13:10,14:[1,11],15:[1,12],16:[1,13],19:[1,5],20:[2,7],22:[1,14],23:[1,15],25:[1,16]},{4:30,6:3,7:4,8:6,9:7,11:8,12:9,13:10,14:[1,11],15:[1,12],16:[1,13],19:[1,5],20:[2,7],22:[1,14],23:[1,15],25:[1,16]},{5:[2,12],14:[2,12],15:[2,12],16:[2,12],19:[2,12],20:[2,12],22:[2,12],23:[2,12],25:[2,12]},{5:[2,13],14:[2,13],15:[2,13],16:[2,13],19:[2,13],20:[2,13],22:[2,13],23:[2,13],25:[2,13]},{5:[2,14],14:[2,14],15:[2,14],16:[2,14],19:[2,14],20:[2,14],22:[2,14],23:[2,14],25:[2,14]},{5:[2,15],14:[2,15],15:[2,15],16:[2,15],19:[2,15],20:[2,15],22:[2,15],23:[2,15],25:[2,15]},{17:31,21:24,29:25,36:[1,28],38:[1,27],39:26},{17:32,21:24,29:25,36:[1,28],38:[1,27],39:26},{17:33,21:24,29:25,36:[1,28],38:[1,27],39:26},{21:35,26:34,31:[1,36],32:[1,37],36:[1,28],39:26},{1:[2,1]},{5:[2,2],8:21,9:7,11:8,12:9,13:10,14:[1,11],15:[1,12],16:[1,13],19:[1,19],20:[2,2],22:[1,14],23:[1,15],25:[1,16]},{17:23,21:24,29:25,36:[1,28],38:[1,27],39:26},{5:[2,4],7:38,8:6,9:7,11:8,12:9,13:10,14:[1,11],15:[1,12],16:[1,13],19:[1,19],20:[2,4],22:[1,14],23:[1,15],25:[1,16]},{5:[2,9],14:[2,9],15:[2,9],16:[2,9],19:[2,9],20:[2,9],22:[2,9],23:[2,9],25:[2,9]},{5:[2,23],14:[2,23],15:[2,23],16:[2,23],19:[2,23],20:[2,23],22:[2,23],23:[2,23],25:[2,23]},{18:[1,39]},{18:[2,27],21:44,24:[2,27],27:40,28:41,29:48,30:42,31:[1,45],32:[1,46],33:[1,47],34:43,35:49,36:[1,50],38:[1,27],39:26},{18:[2,28],24:[2,28]},{18:[2,48],24:[2,48],31:[2,48],32:[2,48],33:[2,48],36:[2,48],38:[2,48],40:[1,51]},{21:52,36:[1,28],39:26},{18:[2,50],24:[2,50],31:[2,50],32:[2,50],33:[2,50],36:[2,50],38:[2,50],40:[2,50]},{10:53,20:[1,54]},{10:55,20:[1,54]},{18:[1,56]},{18:[1,57]},{24:[1,58]},{18:[1,59],21:60,36:[1,28],39:26},{18:[2,44],36:[2,44]},{18:[2,45],36:[2,45]},{18:[2,46],36:[2,46]},{5:[2,3],8:21,9:7,11:8,12:9,13:10,14:[1,11],15:[1,12],16:[1,13],19:[1,19],20:[2,3],22:[1,14],23:[1,15],25:[1,16]},{14:[2,17],15:[2,17],16:[2,17],19:[2,17],20:[2,17],22:[2,17],23:[2,17],25:[2,17]},{18:[2,25],21:44,24:[2,25],28:61,29:48,30:62,31:[1,45],32:[1,46],33:[1,47],34:43,35:49,36:[1,50],38:[1,27],39:26},{18:[2,26],24:[2,26]},{18:[2,30],24:[2,30],31:[2,30],32:[2,30],33:[2,30],36:[2,30],38:[2,30]},{18:[2,36],24:[2,36],35:63,36:[1,64]},{18:[2,31],24:[2,31],31:[2,31],32:[2,31],33:[2,31],36:[2,31],38:[2,31]},{18:[2,32],24:[2,32],31:[2,32],32:[2,32],33:[2,32],36:[2,32],38:[2,32]},{18:[2,33],24:[2,33],31:[2,33],32:[2,33],33:[2,33],36:[2,33],38:[2,33]},{18:[2,34],24:[2,34],31:[2,34],32:[2,34],33:[2,34],36:[2,34],38:[2,34]},{18:[2,35],24:[2,35],31:[2,35],32:[2,35],33:[2,35],36:[2,35],38:[2,35]},{18:[2,38],24:[2,38],36:[2,38]},{18:[2,50],24:[2,50],31:[2,50],32:[2,50],33:[2,50],36:[2,50],37:[1,65],38:[2,50],40:[2,50]},{36:[1,66]},{18:[2,47],24:[2,47],31:[2,47],32:[2,47],33:[2,47],36:[2,47],38:[2,47]},{5:[2,10],14:[2,10],15:[2,10],16:[2,10],19:[2,10],20:[2,10],22:[2,10],23:[2,10],25:[2,10]},{21:67,36:[1,28],39:26},{5:[2,11],14:[2,11],15:[2,11],16:[2,11],19:[2,11],20:[2,11],22:[2,11],23:[2,11],25:[2,11]},{14:[2,16],15:[2,16],16:[2,16],19:[2,16],20:[2,16],22:[2,16],23:[2,16],25:[2,16]},{5:[2,19],14:[2,19],15:[2,19],16:[2,19],19:[2,19],20:[2,19],22:[2,19],23:[2,19],25:[2,19]},{5:[2,20],14:[2,20],15:[2,20],16:[2,20],19:[2,20],20:[2,20],22:[2,20],23:[2,20],25:[2,20]},{5:[2,21],14:[2,21],15:[2,21],16:[2,21],19:[2,21],20:[2,21],22:[2,21],23:[2,21],25:[2,21]},{18:[1,68]},{18:[2,24],24:[2,24]},{18:[2,29],24:[2,29],31:[2,29],32:[2,29],33:[2,29],36:[2,29],38:[2,29]},{18:[2,37],24:[2,37],36:[2,37]},{37:[1,65]},{21:69,29:73,31:[1,70],32:[1,71],33:[1,72],36:[1,28],38:[1,27],39:26},{18:[2,49],24:[2,49],31:[2,49],32:[2,49],33:[2,49],36:[2,49],38:[2,49],40:[2,49]},{18:[1,74]},{5:[2,22],14:[2,22],15:[2,22],16:[2,22],19:[2,22],20:[2,22],22:[2,22],23:[2,22],25:[2,22]},{18:[2,39],24:[2,39],36:[2,39]},{18:[2,40],24:[2,40],36:[2,40]},{18:[2,41],24:[2,41],36:[2,41]},{18:[2,42],24:[2,42],36:[2,42]},{18:[2,43],24:[2,43],36:[2,43]},{5:[2,18],14:[2,18],15:[2,18],16:[2,18],19:[2,18],20:[2,18],22:[2,18],23:[2,18],25:[2,18]}],defaultActions:{17:[2,1]},parseError:function(a){throw new Error(a)},parse:function(a){function b(){var a;return a=c.lexer.lex()||1,"number"!=typeof a&&(a=c.symbols_[a]||a),a}var c=this,d=[0],e=[null],f=[],g=this.table,h="",i=0,j=0,k=0;this.lexer.setInput(a),this.lexer.yy=this.yy,this.yy.lexer=this.lexer,this.yy.parser=this,"undefined"==typeof this.lexer.yylloc&&(this.lexer.yylloc={});var l=this.lexer.yylloc;f.push(l);var m=this.lexer.options&&this.lexer.options.ranges;"function"==typeof this.yy.parseError&&(this.parseError=this.yy.parseError);for(var n,o,p,q,r,s,t,u,v,w={};;){if(p=d[d.length-1],this.defaultActions[p]?q=this.defaultActions[p]:((null===n||"undefined"==typeof n)&&(n=b()),q=g[p]&&g[p][n]),"undefined"==typeof q||!q.length||!q[0]){var x="";if(!k){v=[];for(s in g[p])this.terminals_[s]&&s>2&&v.push("'"+this.terminals_[s]+"'");x=this.lexer.showPosition?"Parse error on line "+(i+1)+":\n"+this.lexer.showPosition()+"\nExpecting "+v.join(", ")+", got '"+(this.terminals_[n]||n)+"'":"Parse error on line "+(i+1)+": Unexpected "+(1==n?"end of input":"'"+(this.terminals_[n]||n)+"'"),this.parseError(x,{text:this.lexer.match,token:this.terminals_[n]||n,line:this.lexer.yylineno,loc:l,expected:v})}}if(q[0]instanceof Array&&q.length>1)throw new Error("Parse Error: multiple actions possible at state: "+p+", token: "+n);switch(q[0]){case 1:d.push(n),e.push(this.lexer.yytext),f.push(this.lexer.yylloc),d.push(q[1]),n=null,o?(n=o,o=null):(j=this.lexer.yyleng,h=this.lexer.yytext,i=this.lexer.yylineno,l=this.lexer.yylloc,k>0&&k--);break;case 2:if(t=this.productions_[q[1]][1],w.$=e[e.length-t],w._$={first_line:f[f.length-(t||1)].first_line,last_line:f[f.length-1].last_line,first_column:f[f.length-(t||1)].first_column,last_column:f[f.length-1].last_column},m&&(w._$.range=[f[f.length-(t||1)].range[0],f[f.length-1].range[1]]),r=this.performAction.call(w,h,j,i,this.yy,q[1],e,f),"undefined"!=typeof r)return r;t&&(d=d.slice(0,-1*t*2),e=e.slice(0,-1*t),f=f.slice(0,-1*t)),d.push(this.productions_[q[1]][0]),e.push(w.$),f.push(w._$),u=g[d[d.length-2]][d[d.length-1]],d.push(u);break;case 3:return!0}}return!0}},c=function(){var a={EOF:1,parseError:function(a,b){if(!this.yy.parser)throw new Error(a);this.yy.parser.parseError(a,b)},setInput:function(a){return this._input=a,this._more=this._less=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var a=this._input[0];this.yytext+=a,this.yyleng++,this.offset++,this.match+=a,this.matched+=a;var b=a.match(/(?:\r\n?|\n).*/g);return b?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),a},unput:function(a){var b=a.length,c=a.split(/(?:\r\n?|\n)/g);this._input=a+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-b-1),this.offset-=b;var d=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),c.length-1&&(this.yylineno-=c.length-1);var e=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:c?(c.length===d.length?this.yylloc.first_column:0)+d[d.length-c.length].length-c[0].length:this.yylloc.first_column-b},this.options.ranges&&(this.yylloc.range=[e[0],e[0]+this.yyleng-b]),this},more:function(){return this._more=!0,this},less:function(a){this.unput(this.match.slice(a))},pastInput:function(){var a=this.matched.substr(0,this.matched.length-this.match.length);return(a.length>20?"...":"")+a.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var a=this.match;return a.length<20&&(a+=this._input.substr(0,20-a.length)),(a.substr(0,20)+(a.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var a=this.pastInput(),b=new Array(a.length+1).join("-");return a+this.upcomingInput()+"\n"+b+"^"},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var a,b,c,d,e;this._more||(this.yytext="",this.match="");for(var f=this._currentRules(),g=0;g<f.length&&(c=this._input.match(this.rules[f[g]]),!c||b&&!(c[0].length>b[0].length)||(b=c,d=g,this.options.flex));g++);return b?(e=b[0].match(/(?:\r\n?|\n).*/g),e&&(this.yylineno+=e.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:e?e[e.length-1].length-e[e.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+b[0].length},this.yytext+=b[0],this.match+=b[0],this.matches=b,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._input=this._input.slice(b[0].length),this.matched+=b[0],a=this.performAction.call(this,this.yy,this,f[d],this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),a?a:void 0):""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var a=this.next();return"undefined"!=typeof a?a:this.lex()},begin:function(a){this.conditionStack.push(a)},popState:function(){return this.conditionStack.pop()},_currentRules:function(){return this.conditions[this.conditionStack[this.conditionStack.length-1]].rules},topState:function(){return this.conditionStack[this.conditionStack.length-2]},pushState:function(a){this.begin(a)}};return a.options={},a.performAction=function(a,b,c,d){switch(c){case 0:return b.yytext="\\",14;case 1:if("\\"!==b.yytext.slice(-1)&&this.begin("mu"),"\\"===b.yytext.slice(-1)&&(b.yytext=b.yytext.substr(0,b.yyleng-1),this.begin("emu")),b.yytext)return 14;break;case 2:return 14;case 3:return"\\"!==b.yytext.slice(-1)&&this.popState(),"\\"===b.yytext.slice(-1)&&(b.yytext=b.yytext.substr(0,b.yyleng-1)),14;case 4:return b.yytext=b.yytext.substr(0,b.yyleng-4),this.popState(),15;case 5:return 25;case 6:return 16;case 7:return 20;case 8:return 19;case 9:return 19;case 10:return 23;case 11:return 22;case 12:this.popState(),this.begin("com");break;case 13:return b.yytext=b.yytext.substr(3,b.yyleng-5),this.popState(),15;case 14:return 22;case 15:return 37;case 16:return 36;case 17:return 36;case 18:return 40;case 19:break;case 20:return this.popState(),24;case 21:return this.popState(),18;case 22:return b.yytext=b.yytext.substr(1,b.yyleng-2).replace(/\\"/g,'"'),31;case 23:return b.yytext=b.yytext.substr(1,b.yyleng-2).replace(/\\'/g,"'"),31;case 24:return 38;case 25:return 33;case 26:return 33;case 27:return 32;case 28:return 36;case 29:return b.yytext=b.yytext.substr(1,b.yyleng-2),36;case 30:return"INVALID";case 31:return 5}},a.rules=[/^(?:\\\\(?=(\{\{)))/,/^(?:[^ ]*?(?=(\{\{)))/,/^(?:[^ ]+)/,/^(?:[^ ]{2,}?(?=(\{\{|$)))/,/^(?:[\s\S]*?--\}\})/,/^(?:\{\{>)/,/^(?:\{\{#)/,/^(?:\{\{\/)/,/^(?:\{\{\^)/,/^(?:\{\{\s*else\b)/,/^(?:\{\{\{)/,/^(?:\{\{&)/,/^(?:\{\{!--)/,/^(?:\{\{![\s\S]*?\}\})/,/^(?:\{\{)/,/^(?:=)/,/^(?:\.(?=[}\/ ]))/,/^(?:\.\.)/,/^(?:[\/.])/,/^(?:\s+)/,/^(?:\}\}\})/,/^(?:\}\})/,/^(?:"(\\["]|[^"])*")/,/^(?:'(\\[']|[^'])*')/,/^(?:@)/,/^(?:true(?=[}\s]))/,/^(?:false(?=[}\s]))/,/^(?:-?[0-9]+(?=[}\s]))/,/^(?:[^\s!"#%-,\.\/;->@\[-\^`\{-~]+(?=[=}\s\/.]))/,/^(?:\[[^\]]*\])/,/^(?:.)/,/^(?:$)/],a.conditions={mu:{rules:[5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31],inclusive:!1},emu:{rules:[3],inclusive:!1},com:{rules:[4],inclusive:!1},INITIAL:{rules:[0,1,2,31],inclusive:!0}},a}();return b.lexer=c,a.prototype=b,b.Parser=a,new a}();a.Parser=f,a.parse=function(b){return b.constructor===a.AST.ProgramNode?b:(a.Parser.yy=a.AST,a.Parser.parse(b))},a.AST={},a.AST.ProgramNode=function(b,c){this.type="program",this.statements=b,c&&(this.inverse=new a.AST.ProgramNode(c))},a.AST.MustacheNode=function(a,b,c){this.type="mustache",this.escaped=!c,this.hash=b;var d=this.id=a[0],e=this.params=a.slice(1),f=this.eligibleHelper=d.isSimple;this.isHelper=f&&(e.length||b)},a.AST.PartialNode=function(a,b){this.type="partial",this.partialName=a,this.context=b},a.AST.BlockNode=function(b,c,d,e){var f=function(b,c){if(b.original!==c.original)throw new a.Exception(b.original+" doesn't match "+c.original)};f(b.id,e),this.type="block",this.mustache=b,this.program=c,this.inverse=d,this.inverse&&!this.program&&(this.isInverse=!0)},a.AST.ContentNode=function(a){this.type="content",this.string=a},a.AST.HashNode=function(a){this.type="hash",this.pairs=a},a.AST.IdNode=function(b){this.type="ID";for(var c="",d=[],e=0,f=0,g=b.length;g>f;f++){var h=b[f].part;if(c+=(b[f].separator||"")+h,".."===h||"."===h||"this"===h){if(d.length>0)throw new a.Exception("Invalid path: "+c);".."===h?e++:this.isScoped=!0}else d.push(h)}this.original=c,this.parts=d,this.string=d.join("."),this.depth=e,this.isSimple=1===b.length&&!this.isScoped&&0===e,this.stringModeValue=this.string},a.AST.PartialNameNode=function(a){this.type="PARTIAL_NAME",this.name=a.original},a.AST.DataNode=function(a){this.type="DATA",this.id=a},a.AST.StringNode=function(a){this.type="STRING",this.original=this.string=this.stringModeValue=a},a.AST.IntegerNode=function(a){this.type="INTEGER",this.original=this.integer=a,this.stringModeValue=Number(a)},a.AST.BooleanNode=function(a){this.type="BOOLEAN",this.bool=a,this.stringModeValue="true"===a},a.AST.CommentNode=function(a){this.type="comment",this.comment=a};var g=["description","fileName","lineNumber","message","name","number","stack"];a.Exception=function(){for(var a=Error.prototype.constructor.apply(this,arguments),b=0;b<g.length;b++)this[g[b]]=a[g[b]]},a.Exception.prototype=new Error,a.SafeString=function(a){this.string=a},a.SafeString.prototype.toString=function(){return this.string.toString()};var h={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},i=/[&<>"'`]/g,j=/[&<>"'`]/,k=function(a){return h[a]||"&amp;"};a.Utils={extend:function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])},escapeExpression:function(b){return b instanceof a.SafeString?b.toString():null==b||b===!1?"":(b=b.toString(),j.test(b)?b.replace(i,k):b)},isEmpty:function(a){return a||0===a?"[object Array]"===c.call(a)&&0===a.length?!0:!1:!0}};var l=a.Compiler=function(){},m=a.JavaScriptCompiler=function(){};l.prototype={compiler:l,disassemble:function(){for(var a,b,c,d=this.opcodes,e=[],f=0,g=d.length;g>f;f++)if(a=d[f],"DECLARE"===a.opcode)e.push("DECLARE "+a.name+"="+a.value);else{b=[];for(var h=0;h<a.args.length;h++)c=a.args[h],"string"==typeof c&&(c='"'+c.replace("\n","\\n")+'"'),b.push(c);e.push(a.opcode+" "+b.join(" "))}return e.join("\n")},equals:function(a){var b=this.opcodes.length;if(a.opcodes.length!==b)return!1;for(var c=0;b>c;c++){var d=this.opcodes[c],e=a.opcodes[c];if(d.opcode!==e.opcode||d.args.length!==e.args.length)return!1;for(var f=0;f<d.args.length;f++)if(d.args[f]!==e.args[f])return!1}if(b=this.children.length,a.children.length!==b)return!1;for(c=0;b>c;c++)if(!this.children[c].equals(a.children[c]))return!1;return!0},guid:0,compile:function(a,b){this.children=[],this.depths={list:[]},this.options=b;var c=this.options.knownHelpers;if(this.options.knownHelpers={helperMissing:!0,blockHelperMissing:!0,each:!0,"if":!0,unless:!0,"with":!0,log:!0},c)for(var d in c)this.options.knownHelpers[d]=c[d];return this.program(a)},accept:function(a){return this[a.type](a)},program:function(a){var b,c=a.statements;this.opcodes=[];for(var d=0,e=c.length;e>d;d++)b=c[d],this[b.type](b);return this.isSimple=1===e,this.depths.list=this.depths.list.sort(function(a,b){return a-b}),this},compileProgram:function(a){var b,c=(new this.compiler).compile(a,this.options),d=this.guid++;this.usePartial=this.usePartial||c.usePartial,this.children[d]=c;for(var e=0,f=c.depths.list.length;f>e;e++)b=c.depths.list[e],2>b||this.addDepth(b-1);return d},block:function(a){var b=a.mustache,c=a.program,d=a.inverse;c&&(c=this.compileProgram(c)),d&&(d=this.compileProgram(d));var e=this.classifyMustache(b);"helper"===e?this.helperMustache(b,c,d):"simple"===e?(this.simpleMustache(b),this.opcode("pushProgram",c),this.opcode("pushProgram",d),this.opcode("emptyHash"),this.opcode("blockValue")):(this.ambiguousMustache(b,c,d),this.opcode("pushProgram",c),this.opcode("pushProgram",d),this.opcode("emptyHash"),this.opcode("ambiguousBlockValue")),this.opcode("append")},hash:function(a){var b,c,d=a.pairs;this.opcode("pushHash");for(var e=0,f=d.length;f>e;e++)b=d[e],c=b[1],this.options.stringParams?(c.depth&&this.addDepth(c.depth),this.opcode("getContext",c.depth||0),this.opcode("pushStringParam",c.stringModeValue,c.type)):this.accept(c),this.opcode("assignToHash",b[0]);this.opcode("popHash")},partial:function(a){var b=a.partialName;this.usePartial=!0,a.context?this.ID(a.context):this.opcode("push","depth0"),this.opcode("invokePartial",b.name),this.opcode("append")},content:function(a){this.opcode("appendContent",a.string)},mustache:function(a){var b=this.options,c=this.classifyMustache(a);"simple"===c?this.simpleMustache(a):"helper"===c?this.helperMustache(a):this.ambiguousMustache(a),this.opcode(a.escaped&&!b.noEscape?"appendEscaped":"append")},ambiguousMustache:function(a,b,c){var d=a.id,e=d.parts[0],f=null!=b||null!=c;this.opcode("getContext",d.depth),this.opcode("pushProgram",b),this.opcode("pushProgram",c),this.opcode("invokeAmbiguous",e,f)},simpleMustache:function(a){var b=a.id;"DATA"===b.type?this.DATA(b):b.parts.length?this.ID(b):(this.addDepth(b.depth),this.opcode("getContext",b.depth),this.opcode("pushContext")),this.opcode("resolvePossibleLambda")},helperMustache:function(a,b,c){var d=this.setupFullMustacheParams(a,b,c),e=a.id.parts[0];if(this.options.knownHelpers[e])this.opcode("invokeKnownHelper",d.length,e);else{if(this.options.knownHelpersOnly)throw new Error("You specified knownHelpersOnly, but used the unknown helper "+e);this.opcode("invokeHelper",d.length,e)}},ID:function(a){this.addDepth(a.depth),this.opcode("getContext",a.depth);var b=a.parts[0];b?this.opcode("lookupOnContext",a.parts[0]):this.opcode("pushContext");for(var c=1,d=a.parts.length;d>c;c++)this.opcode("lookup",a.parts[c])},DATA:function(b){if(this.options.data=!0,b.id.isScoped||b.id.depth)throw new a.Exception("Scoped data references are not supported: "+b.original);this.opcode("lookupData");for(var c=b.id.parts,d=0,e=c.length;e>d;d++)this.opcode("lookup",c[d])},STRING:function(a){this.opcode("pushString",a.string)},INTEGER:function(a){this.opcode("pushLiteral",a.integer)},BOOLEAN:function(a){this.opcode("pushLiteral",a.bool)},comment:function(){},opcode:function(a){this.opcodes.push({opcode:a,args:[].slice.call(arguments,1)})},declare:function(a,b){this.opcodes.push({opcode:"DECLARE",name:a,value:b})},addDepth:function(a){if(isNaN(a))throw new Error("EWOT");0!==a&&(this.depths[a]||(this.depths[a]=!0,this.depths.list.push(a)))},classifyMustache:function(a){var b=a.isHelper,c=a.eligibleHelper,d=this.options;if(c&&!b){var e=a.id.parts[0];d.knownHelpers[e]?b=!0:d.knownHelpersOnly&&(c=!1)}return b?"helper":c?"ambiguous":"simple"},pushParams:function(a){for(var b,c=a.length;c--;)b=a[c],this.options.stringParams?(b.depth&&this.addDepth(b.depth),this.opcode("getContext",b.depth||0),this.opcode("pushStringParam",b.stringModeValue,b.type)):this[b.type](b)},setupMustacheParams:function(a){var b=a.params;return this.pushParams(b),a.hash?this.hash(a.hash):this.opcode("emptyHash"),b},setupFullMustacheParams:function(a,b,c){var d=a.params;return this.pushParams(d),this.opcode("pushProgram",b),this.opcode("pushProgram",c),a.hash?this.hash(a.hash):this.opcode("emptyHash"),d}};var n=function(a){this.value=a};m.prototype={nameLookup:function(a,b){return/^[0-9]+$/.test(b)?a+"["+b+"]":m.isValidJavaScriptVariableName(b)?a+"."+b:a+"['"+b+"']"},appendToBuffer:function(a){return this.environment.isSimple?"return "+a+";":{appendToBuffer:!0,content:a,toString:function(){return"buffer += "+a+";"}}},initializeBuffer:function(){return this.quotedString("")},namespace:"Handlebars",compile:function(b,c,d,e){this.environment=b,this.options=c||{},a.log(a.logger.DEBUG,this.environment.disassemble()+"\n\n"),this.name=this.environment.name,this.isChild=!!d,this.context=d||{programs:[],environments:[],aliases:{}},this.preamble(),this.stackSlot=0,this.stackVars=[],this.registers={list:[]},this.compileStack=[],this.inlineStack=[],this.compileChildren(b,c);var f,g=b.opcodes;for(this.i=0,r=g.length;this.i<r;this.i++)f=g[this.i],"DECLARE"===f.opcode?this[f.name]=f.value:this[f.opcode].apply(this,f.args);return this.createFunctionContext(e)},nextOpcode:function(){var a=this.environment.opcodes;return a[this.i+1]},eat:function(){this.i=this.i+1},preamble:function(){var a=[];if(this.isChild)a.push("");else{var b=this.namespace,c="helpers = this.merge(helpers, "+b+".helpers);";this.environment.usePartial&&(c=c+" partials = this.merge(partials, "+b+".partials);"),this.options.data&&(c+=" data = data || {};"),a.push(c)}a.push(this.environment.isSimple?"":", buffer = "+this.initializeBuffer()),this.lastContext=0,this.source=a},createFunctionContext:function(b){var c=this.stackVars.concat(this.registers.list);if(c.length>0&&(this.source[1]=this.source[1]+", "+c.join(", ")),!this.isChild)for(var d in this.context.aliases)this.context.aliases.hasOwnProperty(d)&&(this.source[1]=this.source[1]+", "+d+"="+this.context.aliases[d]);this.source[1]&&(this.source[1]="var "+this.source[1].substring(2)+";"),this.isChild||(this.source[1]+="\n"+this.context.programs.join("\n")+"\n"),this.environment.isSimple||this.source.push("return buffer;");for(var e=this.isChild?["depth0","data"]:["Handlebars","depth0","helpers","partials","data"],f=0,g=this.environment.depths.list.length;g>f;f++)e.push("depth"+this.environment.depths.list[f]);var h=this.mergeSource();if(!this.isChild){var i=a.COMPILER_REVISION,j=a.REVISION_CHANGES[i];h="this.compilerInfo = ["+i+",'"+j+"'];\n"+h}if(b)return e.push(h),Function.apply(this,e);var k="function "+(this.name||"")+"("+e.join(",")+") {\n  "+h+"}";return a.log(a.logger.DEBUG,k+"\n\n"),k},mergeSource:function(){for(var a,c="",d=0,e=this.source.length;e>d;d++){var f=this.source[d];f.appendToBuffer?a=a?a+"\n    + "+f.content:f.content:(a&&(c+="buffer += "+a+";\n  ",a=b),c+=f+"\n  ")}return c},blockValue:function(){this.context.aliases.blockHelperMissing="helpers.blockHelperMissing";var a=["depth0"];this.setupParams(0,a),this.replaceStack(function(b){return a.splice(1,0,b),"blockHelperMissing.call("+a.join(", ")+")"})},ambiguousBlockValue:function(){this.context.aliases.blockHelperMissing="helpers.blockHelperMissing";var a=["depth0"];this.setupParams(0,a);var b=this.topStack();a.splice(1,0,b),a[a.length-1]="options",this.source.push("if (!"+this.lastHelper+") { "+b+" = blockHelperMissing.call("+a.join(", ")+"); }")},appendContent:function(a){this.source.push(this.appendToBuffer(this.quotedString(a)))},append:function(){this.flushInline();var a=this.popStack();this.source.push("if("+a+" || "+a+" === 0) { "+this.appendToBuffer(a)+" }"),this.environment.isSimple&&this.source.push("else { "+this.appendToBuffer("''")+" }")},appendEscaped:function(){this.context.aliases.escapeExpression="this.escapeExpression",this.source.push(this.appendToBuffer("escapeExpression("+this.popStack()+")"))},getContext:function(a){this.lastContext!==a&&(this.lastContext=a)},lookupOnContext:function(a){this.push(this.nameLookup("depth"+this.lastContext,a,"context"))},pushContext:function(){this.pushStackLiteral("depth"+this.lastContext)},resolvePossibleLambda:function(){this.context.aliases.functionType='"function"',this.replaceStack(function(a){return"typeof "+a+" === functionType ? "+a+".apply(depth0) : "+a})},lookup:function(a){this.replaceStack(function(b){return b+" == null || "+b+" === false ? "+b+" : "+this.nameLookup(b,a,"context")})},lookupData:function(){this.push("data")},pushStringParam:function(a,b){this.pushStackLiteral("depth"+this.lastContext),this.pushString(b),"string"==typeof a?this.pushString(a):this.pushStackLiteral(a)},emptyHash:function(){this.pushStackLiteral("{}"),this.options.stringParams&&(this.register("hashTypes","{}"),this.register("hashContexts","{}"))},pushHash:function(){this.hash={values:[],types:[],contexts:[]}},popHash:function(){var a=this.hash;this.hash=b,this.options.stringParams&&(this.register("hashContexts","{"+a.contexts.join(",")+"}"),this.register("hashTypes","{"+a.types.join(",")+"}")),this.push("{\n    "+a.values.join(",\n    ")+"\n  }")},pushString:function(a){this.pushStackLiteral(this.quotedString(a))},push:function(a){return this.inlineStack.push(a),a},pushLiteral:function(a){this.pushStackLiteral(a)},pushProgram:function(a){this.pushStackLiteral(null!=a?this.programExpression(a):null)},invokeHelper:function(a,b){this.context.aliases.helperMissing="helpers.helperMissing";var c=this.lastHelper=this.setupHelper(a,b,!0),d=this.nameLookup("depth"+this.lastContext,b,"context");this.push(c.name+" || "+d),this.replaceStack(function(a){return a+" ? "+a+".call("+c.callParams+") : helperMissing.call("+c.helperMissingParams+")"})},invokeKnownHelper:function(a,b){var c=this.setupHelper(a,b);this.push(c.name+".call("+c.callParams+")")},invokeAmbiguous:function(a,b){this.context.aliases.functionType='"function"',this.pushStackLiteral("{}");var c=this.setupHelper(0,a,b),d=this.lastHelper=this.nameLookup("helpers",a,"helper"),e=this.nameLookup("depth"+this.lastContext,a,"context"),f=this.nextStack();this.source.push("if ("+f+" = "+d+") { "+f+" = "+f+".call("+c.callParams+"); }"),this.source.push("else { "+f+" = "+e+"; "+f+" = typeof "+f+" === functionType ? "+f+".apply(depth0) : "+f+"; }")},invokePartial:function(a){var b=[this.nameLookup("partials",a,"partial"),"'"+a+"'",this.popStack(),"helpers","partials"];this.options.data&&b.push("data"),this.context.aliases.self="this",this.push("self.invokePartial("+b.join(", ")+")")},assignToHash:function(a){var b,c,d=this.popStack();this.options.stringParams&&(c=this.popStack(),b=this.popStack());var e=this.hash;b&&e.contexts.push("'"+a+"': "+b),c&&e.types.push("'"+a+"': "+c),e.values.push("'"+a+"': ("+d+")")},compiler:m,compileChildren:function(a,b){for(var c,d,e=a.children,f=0,g=e.length;g>f;f++){c=e[f],d=new this.compiler;var h=this.matchExistingProgram(c);null==h?(this.context.programs.push(""),h=this.context.programs.length,c.index=h,c.name="program"+h,this.context.programs[h]=d.compile(c,b,this.context),this.context.environments[h]=c):(c.index=h,c.name="program"+h)}},matchExistingProgram:function(a){for(var b=0,c=this.context.environments.length;c>b;b++){var d=this.context.environments[b];if(d&&d.equals(a))return b}},programExpression:function(a){if(this.context.aliases.self="this",null==a)return"self.noop";for(var b,c=this.environment.children[a],d=c.depths.list,e=[c.index,c.name,"data"],f=0,g=d.length;g>f;f++)b=d[f],e.push(1===b?"depth0":"depth"+(b-1));return(0===d.length?"self.program(":"self.programWithDepth(")+e.join(", ")+")"},register:function(a,b){this.useRegister(a),this.source.push(a+" = "+b+";")},useRegister:function(a){this.registers[a]||(this.registers[a]=!0,this.registers.list.push(a))},pushStackLiteral:function(a){return this.push(new n(a))},pushStack:function(a){this.flushInline();var b=this.incrStack();return a&&this.source.push(b+" = "+a+";"),this.compileStack.push(b),b},replaceStack:function(a){var b,c="",d=this.isInline();if(d){var e=this.popStack(!0);if(e instanceof n)b=e.value;else{var f=this.stackSlot?this.topStackName():this.incrStack();c="("+this.push(f)+" = "+e+"),",b=this.topStack()}}else b=this.topStack();var g=a.call(this,b);return d?((this.inlineStack.length||this.compileStack.length)&&this.popStack(),this.push("("+c+g+")")):(/^stack/.test(b)||(b=this.nextStack()),this.source.push(b+" = ("+c+g+");")),b},nextStack:function(){return this.pushStack()},incrStack:function(){return this.stackSlot++,this.stackSlot>this.stackVars.length&&this.stackVars.push("stack"+this.stackSlot),this.topStackName()
},topStackName:function(){return"stack"+this.stackSlot},flushInline:function(){var a=this.inlineStack;if(a.length){this.inlineStack=[];for(var b=0,c=a.length;c>b;b++){var d=a[b];d instanceof n?this.compileStack.push(d):this.pushStack(d)}}},isInline:function(){return this.inlineStack.length},popStack:function(a){var b=this.isInline(),c=(b?this.inlineStack:this.compileStack).pop();return!a&&c instanceof n?c.value:(b||this.stackSlot--,c)},topStack:function(a){var b=this.isInline()?this.inlineStack:this.compileStack,c=b[b.length-1];return!a&&c instanceof n?c.value:c},quotedString:function(a){return'"'+a.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")+'"'},setupHelper:function(a,b,c){var d=[];this.setupParams(a,d,c);var e=this.nameLookup("helpers",b,"helper");return{params:d,name:e,callParams:["depth0"].concat(d).join(", "),helperMissingParams:c&&["depth0",this.quotedString(b)].concat(d).join(", ")}},setupParams:function(a,b,c){var d,e,f,g=[],h=[],i=[];g.push("hash:"+this.popStack()),e=this.popStack(),f=this.popStack(),(f||e)&&(f||(this.context.aliases.self="this",f="self.noop"),e||(this.context.aliases.self="this",e="self.noop"),g.push("inverse:"+e),g.push("fn:"+f));for(var j=0;a>j;j++)d=this.popStack(),b.push(d),this.options.stringParams&&(i.push(this.popStack()),h.push(this.popStack()));return this.options.stringParams&&(g.push("contexts:["+h.join(",")+"]"),g.push("types:["+i.join(",")+"]"),g.push("hashContexts:hashContexts"),g.push("hashTypes:hashTypes")),this.options.data&&g.push("data:data"),g="{"+g.join(",")+"}",c?(this.register("options",g),b.push("options")):b.push(g),b.join(", ")}};for(var o="break else new var case finally return void catch for switch while continue function this with default if throw delete in try do instanceof typeof abstract enum int short boolean export interface static byte extends long super char final native synchronized class float package throws const goto private transient debugger implements protected volatile double import public let yield".split(" "),p=m.RESERVED_WORDS={},q=0,r=o.length;r>q;q++)p[o[q]]=!0;m.isValidJavaScriptVariableName=function(a){return!m.RESERVED_WORDS[a]&&/^[a-zA-Z_$][0-9a-zA-Z_$]+$/.test(a)?!0:!1},a.precompile=function(b,c){if(null==b||"string"!=typeof b&&b.constructor!==a.AST.ProgramNode)throw new a.Exception("You must pass a string or Handlebars AST to Handlebars.precompile. You passed "+b);c=c||{},"data"in c||(c.data=!0);var d=a.parse(b),e=(new l).compile(d,c);return(new m).compile(e,c)},a.compile=function(c,d){function e(){var e=a.parse(c),f=(new l).compile(e,d),g=(new m).compile(f,d,b,!0);return a.template(g)}if(null==c||"string"!=typeof c&&c.constructor!==a.AST.ProgramNode)throw new a.Exception("You must pass a string or Handlebars AST to Handlebars.compile. You passed "+c);d=d||{},"data"in d||(d.data=!0);var f;return function(a,b){return f||(f=e()),f.call(this,a,b)}},a.VM={template:function(b){var c={escapeExpression:a.Utils.escapeExpression,invokePartial:a.VM.invokePartial,programs:[],program:function(b,c,d){var e=this.programs[b];return d?e=a.VM.program(b,c,d):e||(e=this.programs[b]=a.VM.program(b,c)),e},merge:function(b,c){var d=b||c;return b&&c&&(d={},a.Utils.extend(d,c),a.Utils.extend(d,b)),d},programWithDepth:a.VM.programWithDepth,noop:a.VM.noop,compilerInfo:null};return function(d,e){e=e||{};var f=b.call(c,a,d,e.helpers,e.partials,e.data),g=c.compilerInfo||[],h=g[0]||1,i=a.COMPILER_REVISION;if(h!==i){if(i>h){var j=a.REVISION_CHANGES[i],k=a.REVISION_CHANGES[h];throw"Template was precompiled with an older version of Handlebars than the current runtime. Please update your precompiler to a newer version ("+j+") or downgrade your runtime to an older version ("+k+")."}throw"Template was precompiled with a newer version of Handlebars than the current runtime. Please update your runtime to a newer version ("+g[1]+")."}return f}},programWithDepth:function(a,b,c){var d=Array.prototype.slice.call(arguments,3),e=function(a,e){return e=e||{},b.apply(this,[a,e.data||c].concat(d))};return e.program=a,e.depth=d.length,e},program:function(a,b,c){var d=function(a,d){return d=d||{},b(a,d.data||c)};return d.program=a,d.depth=0,d},noop:function(){return""},invokePartial:function(c,d,e,f,g,h){var i={helpers:f,partials:g,data:h};if(c===b)throw new a.Exception("The partial "+d+" could not be found");if(c instanceof Function)return c(e,i);if(a.compile)return g[d]=a.compile(c,{data:h!==b}),g[d](e,i);throw new a.Exception("The partial "+d+" could not be compiled when running in runtime-only mode")}},a.template=a.VM.template}(Handlebars),function(){"use strict";window.mlab=window.mlab||{},mlab.pkg=function(a){return a.split(".").reduce(function(a,b){return a[b]=a[b]||{},a[b]},window)},mlab.pkg("mlab.array"),mlab.array.index=function(a,b){return a=a||[],a.reduce(function(a,c){return a[null!==b?c[b||"id"]:c]=c,a},{})},mlab.array.unique=function(a){a=a||[];var b,c=a.length,d=[];for(b=0;c>b;b++)a.lastIndexOf(a[b])===b&&d.push(a[b]);return d},mlab.pkg("mlab.string"),mlab.string.trim=function(a){return a.replace(/^\s+/g,"").replace(/\s+$/g,"")},mlab.date=function(a){var b,c;if(a=a.toString(),mlab.date.masks.some(function(d){return c=a.match(d.regex),c?(b=d.fn(c),!0):!1})){if(isNaN(b.valueOf()))throw new Error("Unvalid date: "+a);return b}throw new Error("Unrecognized date: "+a)},mlab.date.masks=[{regex:/([0-9]+)-([0-9]+)-([0-9]+) ([0-9]+):([0-9]+):([0-9]+)/,fn:function(a){return new Date(+a[1],+a[2]-1,+a[3],+a[4],+a[5],+a[6])}},{regex:/([0-9]+)-([0-9]+)-([0-9]+)/,fn:function(a){return new Date(+a[1],+a[2]-1,+a[3])}},{regex:/([0-9]{4})([0-9]{2})([0-9]{2})/,fn:function(a){return new Date(+a[1],+a[2]-1,+a[3])}}],mlab.pkg("mlab.fn"),mlab.fn.id=function(a){return a},mlab.fn.nil=function(){}}(),function(){"use strict";Handlebars.registerHelper("t",function(a){var b=i18n.t(a);return new Handlebars.SafeString(b)}),Handlebars.registerHelper("ifCond",function(a,b,c,d){switch(b){case"==":return a==c?d.fn(this):d.inverse(this);case"===":return a===c?d.fn(this):d.inverse(this);case"<":return c>a?d.fn(this):d.inverse(this);case"<=":return c>=a?d.fn(this):d.inverse(this);case">":return a>c?d.fn(this):d.inverse(this);case">=":return a>=c?d.fn(this):d.inverse(this);default:return d.inverse(this)}}),mlab.pkg("blf.templates.preloaded"),function(){function a(a,c){blf.templates.get(a)?c&&c(blf.templates.get(a)):$.ajax({url:d+a+e,success:function(d){b[a]=Handlebars.compile(d),c&&c(b[a])}})}var b={},c={},d="templates/",e=".handlebars";blf.templates.require=function(b,c){if("string"==typeof b)a(b,c);else for(var d in b)a(b[d])},blf.templates.get=function(a){return c[a]||blf.templates.preloaded[d+a+e]||b[a]},blf.templates.override=function(a,b){c[a]=b}}(),mlab.pkg("blf.utils"),blf.utils.translateLabels=function(a,b){var c,d={};if(a=a,domino.struct.check("object",a))for(c in a)"labels"===c?d.label=a[c][b]:d[c]=domino.struct.check("array",a[c])?a[c].map(function(a){return blf.utils.translateLabels(a,b)}):domino.struct.check("object",a[c])?blf.utils.translateLabels(a[c],b):a[c];else d=domino.struct.check("array",a)?a.map(function(a){return blf.utils.translateLabels(a,b)}):a;return d},blf.utils.extractMajors=function(a){var b=[],c=[],d=[];return a.forEach(function(a){a.default?b.push(a):a.major?c.push(a):a.deprecated||d.push(a)}),c.length&&(d.length&&(d=[{separator:!0}].concat(d)),d=c.concat(d)),b.length&&(d.length&&(d=[{separator:!0}].concat(d)),d=b.concat(d)),d}}(),function(){"use strict";mlab.pkg("blf.modules"),blf.modules.layout=function(a){function b(){c.dispatchEvent("search",{query:$("#simple-entries-search",e).val()})}domino.module.call(this);var c=this,d=$("#layout"),e=$("#nav",d),f=$("#panels",d),g=[];$('button[data-action="search"]',e).click(b),$("#simple-entries-search",e).keypress(function(a){13===a.which&&b()}),$("button[data-mode]",e).click(function(){c.dispatchEvent("updateMode",{mode:$(this).data("mode")})}),g.push(a.addModule(blf.modules.fieldsPanel,[$('[data-panel="fields"]',f)])),g.push(a.addModule(blf.modules.createPanel,[$('[data-panel="create"]',f),a])),g.push(a.addModule(blf.modules.listPanel,[$('[data-panel="list"]',f)])),g.push(a.addModule(blf.modules.advancedSearchPanel,[$('[data-panel="advancedSearch"]',f),a])),this.triggers.events.modeUpdated=function(a){var b=a.get("mode");$('[data-panel]:not([data-panel="'+b+'"])',f).css("display","none"),$('[data-panel="'+b+'"]',f).css("display","")}}}(),window.blf=window.blf||{},blf.init=function(a){"use strict";function b(){domino.struct.isValid("Config")||domino.struct.add({id:"Config",struct:"object"}),domino.struct.isValid("blf.Dict")||domino.struct.add({id:"blf.Dict",includes:!0,struct:{fr:"?string",en:"?string"}}),domino.struct.isValid("blf.Property")||domino.struct.add({id:"blf.Property",includes:!0,struct:{filter_date_begin:"?string",filter_date_end:"?string",property:"?string",multiple:"?boolean",required:"?boolean",type_data:"?string",type_ui:"string",labels:"?blf.Dict",label:"?string"}}),domino.struct.isValid("blf.Field")||domino.struct.add({id:"blf.Field",includes:!0,struct:{_id:"object",rec_type:"string",rec_class:"string",rec_metajson:"number",children:["blf.Property"]}}),domino.struct.isValid("blf.FieldsIndex")||domino.struct.add({id:"blf.FieldsIndex",includes:!0,struct:function(a){var b;if(!domino.struct.check("object",a))return!1;for(b in a)if(!domino.struct.check("blf.Field",a[b]))return!1;return!0}}),c=new domino({name:a.name||a.corpus,properties:[{value:a.lang,id:"assets_lang",type:"string",description:"[ASSETS] The current lang."},{value:[{id:"fr",labels:{fr:"Français",en:"French"}},{id:"en",labels:{fr:"Anglais",en:"English"}}],id:"assets_languages",type:"array",description:"[ASSETS] The list of available languages + translations."},{value:{},id:"fields",type:"blf.FieldsIndex",dispatch:"fieldsUpdated",description:"The list of fields that are already loaded."},{value:{},id:"availableFields",type:"object",dispatch:"availableFieldsUpdated",description:"The list of existing and editable fields."},{value:{},id:"fieldsTree",type:"object",dispatch:"fieldsTreeUpdated",description:"The fields tree."},{value:[],id:"creatorRoles",type:"array",dispatch:"creatorRolesUpdated",description:"The creator roles list."},{value:[],id:"creatorAffiliationPersonRoles",type:"array",dispatch:"creatorAffiliationPersonRolesUpdated",description:"The creator affiliation roles list."},{value:[],id:"resultsList",type:"array",triggers:"updateResultsList",dispatch:"resultsListUpdated",description:"The results list."},{value:{},id:"lists",type:"object",triggers:"updateLists",dispatch:"listsUpdated",description:"The miscellaneous lists."},{value:a,id:"config",type:"Config",description:"The configuration object of the interface."},{value:null,id:"waitingEntry",type:"?object",triggers:"updateWaitingEntry",dispatch:"waitingEntryUpdated",description:"An entry to edit, waiting for the field specifications to be loaded."},{value:null,id:"waitingField",type:"?string",triggers:"updateWaitingField",dispatch:"waitingFieldUpdated",description:"A field that is being loaded."},{value:"home",id:"mode",type:"string",triggers:"updateMode",dispatch:"modeUpdated",description:"The layout mode (home, create, fields, search, list)."}],hacks:[{triggers:"successCallback",description:"Triggered from services success function, execute config callbacks given in init()",method:function(b){this.log("calling config config.callbacks with params :",b.data),a.callbacks&&a.callbacks[b.data.service]&&a.callbacks[b.data.service](c,b.data)}},{triggers:"callback",description:"Manually triggered from inside the various stuffs",method:function(a){this.log("@callback",a)}},{triggers:"validateEntry",description:"What happens when an entry is validated from the form.",method:function(a){this.request("save",{entry:a.data.entry})}},{triggers:"search",description:"Search for entries matching the specified query.",method:function(a){var b="object"==typeof a.data.query?domino.utils.clone(a.data.query):{search_terms:[{index:"all",operator:"and",value:a.data.query}]};b.rec_class||(b.rec_class="SearchQuery"),b.rec_metajson||(b.rec_metajson=1),b.filter_class||(b.filter_class="Document"),this.request("search",{query:b})}},{triggers:"resultsListUpdated",description:'Updates the mode to "list" when results are loaded.',method:function(){this.dispatchEvent("updateMode",{mode:"list"})}},{triggers:"loadList",description:"Loads a specific list.",method:function(a){this.request("type",{typeName:a.data.list})}},{triggers:"loadField",description:"Loads a specific field.",method:function(a){this.request("field",{field:a.data.field})}},{triggers:"editEntry",description:"Loads the good field definition if needed and opens the edition panel for the related entry.",method:function(a){var b=a.data.entry,c=this.get("fields");c[b.rec_type]?this.dispatchEvent("displayForm",{entry:b,field:b.rec_type}).update("mode","create"):this.request("field",{field:b.rec_type}).update("waitingEntry",b)}},{triggers:"fieldsUpdated",description:"Check if there is a waiting entry when a field is loaded, and display it is the related field is loaded.",method:function(){var a=this.get("waitingEntry"),b=this.get("waitingField"),c=this.get("fields");a&&c[a.rec_type]?this.dispatchEvent("displayForm",{entry:a,field:a.rec_type}).update({mode:"create",waitingEntry:null}):b&&c[b]&&this.dispatchEvent("displayForm",{field:b}).update({mode:"create",waitingField:null})}},{triggers:"deleteEntry",description:"Deletes the related entry.",method:function(a){this.request("delete",{rec_id:a.data.rec_id})}},{triggers:"openField",description:"Display the panel to create a new entry, with the related field.",method:function(a){var b=a.data.field,c=this.get("fields");this.update("mode","create"),c[b]?this.dispatchEvent("displayForm",{field:b}):(this.update("waitingField",a.data.field),this.request("field",{field:a.data.field}))}},{triggers:"addTypes",description:"The clean way to add one or more types.",method:function(a){var b,c,d,e,f,g=a.data.types||[a.data.type],h=this.get("lists");for(b=0,c=g.length;c>b;b++){switch(d=g[b],d.type_id){case"document_type":f={},e=[],function i(a){a.bundle||a.deprecated||(f[a.type_id]=1,e.push(a)),(a.children||[]).length&&a.children.forEach(i)}(d),this.update({fieldsTree:d,availableFields:f}),h[d.type_id]=e;break;default:h[d.type_id]=d.children||[]}this.update("lists",h)}}}],services:[{id:"list_corpora",url:d.API_URL,description:"Retrieve the corpora list",before:d.rpc.before,type:d.rpc.type,error:d.rpc.error,expect:d.rpc.expect,contentType:d.rpc.contentType,data:function(){return d.rpc.buildData("list_corpora",[])},success:function(){}},{id:"default_corpus",url:d.API_URL,description:"Retrieve the default corpus",before:d.rpc.before,type:d.rpc.type,error:d.rpc.error,expect:d.rpc.expect,contentType:d.rpc.contentType,data:function(){return d.rpc.buildData("default_corpus",[])},success:function(){}},{id:"search",url:d.API_URL,description:"A service to search on existing entries.",before:d.rpc.before,type:d.rpc.type,error:d.rpc.error,expect:d.rpc.expect,contentType:d.rpc.contentType,data:function(a){return d.rpc.buildData("search",[d.corpus,a.query])},success:function(a,b){var c=a.result;this.update("resultsList",c.records||[]),this.dispatchEvent("successCallback",{service:b.service,result:a.result,params:b})}},{id:"type",url:d.API_URL,description:"Loads the list of specified type.",before:d.rpc.before,type:d.rpc.type,error:d.rpc.error,expect:d.rpc.expect,contentType:d.rpc.contentType,data:function(a){return d.rpc.buildData("type",[d.corpus,a.typeName,"fr"])},success:function(a){this.dispatchEvent("addTypes",{type:a.result})}},{id:"types",url:d.API_URL,description:"Loads every lists.",before:d.rpc.before,type:d.rpc.type,error:d.rpc.error,expect:d.rpc.expect,contentType:d.rpc.contentType,data:function(){return d.rpc.buildData("types",[d.corpus,"fr"])},success:function(a){this.dispatchEvent("addTypes",{types:a.result})}},{id:"field",url:d.API_URL,description:"Loads one field specification.",before:d.rpc.before,type:d.rpc.type,error:d.rpc.error,expect:d.rpc.expect,contentType:d.rpc.contentType,data:function(a){return d.rpc.buildData("field",[d.corpus,a.field,"fr"])},success:function(a){var b=a.result,c=this.get("fields");c[b.rec_type]=b,this.update("fields",c)}},{id:"fields",url:d.API_URL,description:"Loads all fields specifications.",before:d.rpc.before,type:d.rpc.type,error:d.rpc.error,expect:d.rpc.expect,contentType:d.rpc.contentType,data:function(){return d.rpc.buildData("fields",[d.corpus,"fr"])},success:function(a){var b,c,d=a.result,e=this.get("fields");for(b=0,c=d.length;c>b;b++)e[d[b].rec_type]=d[b];window.FIELDS=e,this.update("fields",e)}},{id:"get_entry",url:d.API_URL,description:"Retrieve an entry, given the rec_id identifier.",before:d.rpc.before,type:d.rpc.type,error:d.rpc.error,expect:d.rpc.expect,contentType:d.rpc.contentType,data:function(a){return d.rpc.buildData("metadata_by_rec_ids",[d.corpus,[a.rec_id]])},success:function(a,b){var c=a.result;this.log("Log from server after getting an entry:",c,"with input:",b),this.update("mode","home"),this.dispatchEvent("successCallback",{service:b.service||"get_entry",result:a.result,params:b})}},{id:"save",url:d.API_URL,description:"Saves an entry.",before:d.rpc.before,type:d.rpc.type,error:d.rpc.error,expect:d.rpc.expect,contentType:d.rpc.contentType,data:function(a){return d.rpc.buildData("save",[d.corpus,a.entry])},success:function(b,c){var d=b.result;this.log("Log from server after saving an entry:",d),a.back_home_on_save&&this.update("mode","home"),this.dispatchEvent("successCallback",{service:c.service,result:b.result,params:c})}},{id:"delete",url:d.API_URL,description:"Deletes an entry.",before:d.rpc.before,type:d.rpc.type,error:d.rpc.error,expect:d.rpc.expect,contentType:d.rpc.contentType,data:function(a){return d.rpc.buildData("delete",[d.corpus,a.rec_id])},success:function(a,b){var c=a.result;this.log("Log from server after deleting an entry:",c),this.update("resultsList",this.get("resultsList").filter(function(a){return a.rec_id!==b.rec_id})),this.dispatchEvent("successCallback",{service:b.service,result:a.result,params:b})}}]}),c.settings({shortcutPrefix:"::",displayTime:!0,verbose:!0,strict:!0}),c.addModule(blf.modules.layout,[c]),c.request(["types","fields"],{success:function(){"function"==typeof a.onComplete&&a.onComplete(c)}})}mlab.pkg("blf"),a=a||{},a.rpc=a.rpc||{},a.i18n=a.i18n||{},a.lang=a.lang||"en";var c,d={rpc:{}};d.API_URL=a.baseURL,d.corpus=a.corpus,d.rpc.type="POST",d.rpc.contentType="application/x-www-form-urlencoded",d.rpc.expect=function(a){return null!==a&&"object"==typeof a&&!("error"in a)},d.rpc.before=a.rpc.before,d.rpc.error=function(a){this.log("Error:"+a)},d.rpc.buildData=function(a,b){return JSON.stringify({id:1,jsonrpc:"2.0",method:a,params:b})},i18n.init({lng:a.lang,fallbackLng:a.lang,resGetPath:a.i18n.url,ns:{namespaces:["translation","customInputs"],defaultNs:"translation"}},function(){blf.templates.require("main",function(c){a.baseDOM.append(c()),$.t("navigation.addEntry"),$("body").i18n(),b()})})},this.blf=this.blf||{},this.blf.templates=this.blf.templates||{},this.blf.templates.preloaded=this.blf.templates.preloaded||{},this.blf.templates.preloaded["templates/BooleanField.handlebars"]=Handlebars.template(function(a,b,c,d,e){this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var f,g="",h="function",i=this.escapeExpression;return g+='<fieldset class="BooleanField">\n  <div class="message"></div>\n  <label for="',(f=c.property)?f=f.call(b,{hash:{},data:e}):(f=b.property,f=typeof f===h?f.apply(b):f),g+=i(f)+'">\n    ',(f=c.label)?f=f.call(b,{hash:{},data:e}):(f=b.label,f=typeof f===h?f.apply(b):f),g+=i(f)+' :\n  </label>\n  <input class="col-6" name="',(f=c.property)?f=f.call(b,{hash:{},data:e}):(f=b.property,f=typeof f===h?f.apply(b):f),g+=i(f)+'" type="checkbox" />\n</fieldset>\n'}),this.blf.templates.preloaded["templates/CharField.handlebars"]=Handlebars.template(function(a,b,c,d,e){this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var f,g,h="",i="function",j=this.escapeExpression,k=c.helperMissing;return h+='<fieldset class="customInput CharField ',(f=c.property)?f=f.call(b,{hash:{},data:e}):(f=b.property,f=typeof f===i?f.apply(b):f),h+=j(f)+'">\n  <div class="message"></div>\n  <label>\n    ',(f=c.label)?f=f.call(b,{hash:{},data:e}):(f=b.label,f=typeof f===i?f.apply(b):f),h+=j(f)+' :\n  </label>\n  <button class="action add-line">',g={hash:{},data:e},h+=j((f=c.t||b.t,f?f.call(b,"customInputs:CharField.actions.add",g):k.call(b,"t","customInputs:CharField.actions.add",g)))+' <i class="fa fa-plus-circle"></i></button>\n  <div class="lines-container container">\n    <ul class="lines"></ul>\n  </div>\n</fieldset>\n'}),this.blf.templates.preloaded["templates/CharField.line.handlebars"]=Handlebars.template(function(a,b,c,d,e){this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var f,g="",h="function",i=this.escapeExpression;return g+='<li>\n  <input type="text" class="col-4" value="',(f=c.value)?f=f.call(b,{hash:{},data:e}):(f=b.value,f=typeof f===h?f.apply(b):f),g+=i(f)+'" />\n  <button class="remove-line"><i class=\'icon-ban-circle\'></i></button>\n</li>\n'}),this.blf.templates.preloaded["templates/CheckboxField.handlebars"]=Handlebars.template(function(a,b,c,d,e){function f(a,b,d){var e,f,g="";return g+='\n    <fieldset class="checkbox-container" id="',(e=c.type_id)?e=e.call(a,{hash:{},data:b}):(e=a.type_id,e=typeof e===i?e.apply(a):e),g+=j(e)+'" title="',(e=c.label)?e=e.call(a,{hash:{},data:b}):(e=a.label,e=typeof e===i?e.apply(a):e),g+=j(e)+'">\n      <input type="checkbox" data-type-id="',(e=c.type_id)?e=e.call(a,{hash:{},data:b}):(e=a.type_id,e=typeof e===i?e.apply(a):e),g+=j(e)+'" id="'+j((e=d.label,typeof e===i?e.apply(a):e)),(f=c.type_id)?f=f.call(a,{hash:{},data:b}):(f=a.type_id,f=typeof f===i?f.apply(a):f),g+=j(f)+'" />\n      <label for="'+j((e=d.label,typeof e===i?e.apply(a):e)),(f=c.type_id)?f=f.call(a,{hash:{},data:b}):(f=a.type_id,f=typeof f===i?f.apply(a):f),g+=j(f)+'">',(f=c.label)?f=f.call(a,{hash:{},data:b}):(f=a.label,f=typeof f===i?f.apply(a):f),g+=j(f)+"</label>\n    </fieldset>\n    "}this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var g,h="",i="function",j=this.escapeExpression,k=this;return h+='<fieldset class="customInput CheckboxField">\n  <span class="title">',(g=c.label)?g=g.call(b,{hash:{},data:e}):(g=b.label,g=typeof g===i?g.apply(b):g),h+=j(g)+' :</span>\n  <div class="custom-container">\n    ',g=c.each.call(b,b.values,{hash:{},inverse:k.noop,fn:k.programWithDepth(1,f,e,b),data:e}),(g||0===g)&&(h+=g),h+="\n  </div>\n</fieldset>\n"}),this.blf.templates.preloaded["templates/ComponentField.handlebars"]=Handlebars.template(function(a,b,c,d,e){this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var f,g="",h="function",i=this.escapeExpression;return g+='<fieldset class="customInput ComponentField">\n  <div class="message"></div>\n  <label>\n    ',(f=c.label)?f=f.call(b,{hash:{},data:e}):(f=b.label,f=typeof f===h?f.apply(b):f),g+=i(f)+' :\n  </label>\n  <div class="documents-container container">\n    <ul class="documents-list"></ul>\n    <button class="add-document">+</button>\n  </div>\n</fieldset>\n'}),this.blf.templates.preloaded["templates/ComponentField.line.handlebars"]=Handlebars.template(function(a,b,c,d,e){function f(a,b){var d,e="";return e+='\n    <select class="col-3 select-field">\n      ',d=c.each.call(a,a.type_fields,{hash:{},inverse:t.noop,fn:t.program(2,g,b),data:b}),(d||0===d)&&(e+=d),e+="\n    </select>\n  "}function g(a,b){var d,e="";return e+="\n        ",d=c["if"].call(a,a.title,{hash:{},inverse:t.program(5,i,b),fn:t.program(3,h,b),data:b}),(d||0===d)&&(e+=d),e+="\n      "}function h(a){var b,c="";return c+='\n          <option value="blf.placeholder" class="placeholder">'+s((b=a.text,typeof b===r?b.apply(a):b))+"</option>\n        "}function i(a,b){var d,e="";return e+="\n          ",d=c["if"].call(a,a.separator,{hash:{},inverse:t.program(8,k,b),fn:t.program(6,j,b),data:b}),(d||0===d)&&(e+=d),e+="\n        "}function j(){return'\n            <option class="disabled" disabled="disabled">---</option>\n          '}function k(a){var b,c="";return c+='\n            <option value="'+s((b=a.id,typeof b===r?b.apply(a):b))+'">'+s((b=a.label,typeof b===r?b.apply(a):b))+"</option>\n          "}function l(a,b){var d,e="";return e+="\n    ",d=c.each.call(a,a.type_fields,{hash:{},inverse:t.noop,fn:t.program(11,m,b),data:b}),(d||0===d)&&(e+=d),e+="\n  "}function m(a){var b="";return b+='\n      <span class="inline-block col-3">'+s(typeof a===r?a.apply(a):a)+"</span>\n    "}this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var n,o,p,q="",r="function",s=this.escapeExpression,t=this,u=c.helperMissing;return q+='<li data-id="',(n=c.id)?n=n.call(b,{hash:{},data:e}):(n=b.id,n=typeof n===r?n.apply(b):n),q+=s(n)+'">\n  ',p={hash:{},inverse:t.noop,fn:t.program(1,f,e),data:e},n=c.ifCond||b.ifCond,o=n?n.call(b,(n=b.type_fields,null==n||n===!1?n:n.length),">",1,p):u.call(b,"ifCond",(n=b.type_fields,null==n||n===!1?n:n.length),">",1,p),(o||0===o)&&(q+=o),q+="\n  ",p={hash:{},inverse:t.noop,fn:t.program(10,l,e),data:e},n=c.ifCond||b.ifCond,o=n?n.call(b,(n=b.type_fields,null==n||n===!1?n:n.length),"<=",1,p):u.call(b,"ifCond",(n=b.type_fields,null==n||n===!1?n:n.length),"<=",1,p),(o||0===o)&&(q+=o),q+='\n  <button class="remove-document">-</button>\n  <div class="col-6 custom-container">\n  </div>\n</li>\n'}),this.blf.templates.preloaded["templates/CreatorField.Event.handlebars"]=Handlebars.template(function(a,b,c,d,e){function f(a,b){var d,e="";return e+="\n        ",d=c["if"].call(a,a.separator,{hash:{},inverse:o.program(4,h,b),fn:o.program(2,g,b),data:b}),(d||0===d)&&(e+=d),e+="\n      "}function g(){return'\n          <option class="disabled" disabled="disabled">---</option>\n        '}function h(a){var b,c="";return c+='\n          <option value="'+n((b=a.type_id,typeof b===m?b.apply(a):b))+'">'+n((b=a.label,typeof b===m?b.apply(a):b))+"</option>\n        "}this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var i,j,k,l="",m="function",n=this.escapeExpression,o=this,p=c.helperMissing;return l+='<fieldset>\n  <fieldset>\n    <label class="col-3">',k={hash:{},data:e},l+=n((i=c.t||b.t,i?i.call(b,"customInputs:CreatorField.event.title",k):p.call(b,"t","customInputs:CreatorField.event.title",k)))+'</label>\n    <input data-attribute="title" class="col-3" type="text" />\n  </fieldset>\n  <fieldset>\n    <label class="col-3">',k={hash:{},data:e},l+=n((i=c.t||b.t,i?i.call(b,"customInputs:CreatorField.event.number",k):p.call(b,"t","customInputs:CreatorField.event.number",k)))+'</label>\n    <input data-attribute="number" class="col-3" type="number" />\n  </fieldset>\n  <fieldset>\n    <label class="col-3">',k={hash:{},data:e},l+=n((i=c.t||b.t,i?i.call(b,"customInputs:CreatorField.event.international",k):p.call(b,"t","customInputs:CreatorField.event.international",k)))+'</label>\n    <input data-attribute="international" class="col-3" type="checkbox" />\n  </fieldset>\n  <fieldset>\n    <label class="col-3">',k={hash:{},data:e},l+=n((i=c.t||b.t,i?i.call(b,"customInputs:CreatorField.event.place",k):p.call(b,"t","customInputs:CreatorField.event.place",k)))+'</label>\n    <input data-attribute="place" class="col-3" type="text" />\n  </fieldset>\n  <fieldset>\n    <label class="col-3">',k={hash:{},data:e},l+=n((i=c.t||b.t,i?i.call(b,"customInputs:CreatorField.event.country",k):p.call(b,"t","customInputs:CreatorField.event.country",k)))+'</label>\n    <select class="col-3 select-event-country">\n      ',j=c.each.call(b,b.creatorCountries,{hash:{},inverse:o.noop,fn:o.program(1,f,e),data:e}),(j||0===j)&&(l+=j),l+='\n    </select>\n  </fieldset>\n  <fieldset>\n    <label class="col-3">',k={hash:{},data:e},l+=n((i=c.t||b.t,i?i.call(b,"customInputs:CreatorField.event.date_begin",k):p.call(b,"t","customInputs:CreatorField.event.date_begin",k)))+'</label>\n    <input data-attribute="date_begin" class="col-3" type="date" />\n  </fieldset>\n  <fieldset>\n    <label class="col-3">',k={hash:{},data:e},l+=n((i=c.t||b.t,i?i.call(b,"customInputs:CreatorField.event.date_end",k):p.call(b,"t","customInputs:CreatorField.event.date_end",k)))+'</label>\n    <input data-attribute="date_end" class="col-3" type="date" />\n  </fieldset>\n</fieldset>\n'}),this.blf.templates.preloaded["templates/CreatorField.Orgunit.handlebars"]=Handlebars.template(function(a,b,c,d,e){this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var f,g,h="",i=c.helperMissing,j=this.escapeExpression;return h+='<fieldset>\n  <fieldset>\n    <label class="col-3">',g={hash:{},data:e},h+=j((f=c.t||b.t,f?f.call(b,"customInputs:CreatorField.orgunit.name",g):i.call(b,"t","customInputs:CreatorField.orgunit.name",g)))+'</label>\n    <input data-attribute="name" class="col-3" type="text" />\n  </fieldset>\n</fieldset>\n'}),this.blf.templates.preloaded["templates/CreatorField.Person.handlebars"]=Handlebars.template(function(a,b,c,d,e){function f(a,b){var d,e="";return e+="\n        ",d=c["if"].call(a,a.separator,{hash:{},inverse:o.program(4,h,b),fn:o.program(2,g,b),data:b}),(d||0===d)&&(e+=d),e+="\n      "}function g(){return'\n          <option class="disabled" disabled="disabled">---</option>\n        '}function h(a){var b,c="";return c+='\n          <option value="'+n((b=a.type_id,typeof b===m?b.apply(a):b))+'">'+n((b=a.label,typeof b===m?b.apply(a):b))+"</option>\n        "}this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var i,j,k,l="",m="function",n=this.escapeExpression,o=this,p=c.helperMissing;return l+='<fieldset>\n  <fieldset class="person-name-prefix">\n    <label class="col-3">',k={hash:{},data:e},l+=n((i=c.t||b.t,i?i.call(b,"customInputs:CreatorField.person.name_prefix",k):p.call(b,"t","customInputs:CreatorField.person.name_prefix",k)))+'</label>\n    <input data-attribute="name_prefix" class="col-3" type="text" />\n  </fieldset>\n  <fieldset class="person-name-family">\n    <label class="col-3">',k={hash:{},data:e},l+=n((i=c.t||b.t,i?i.call(b,"customInputs:CreatorField.person.name_family",k):p.call(b,"t","customInputs:CreatorField.person.name_family",k)))+'</label>\n    <input data-attribute="name_family" class="col-3" type="text" />\n  </fieldset>\n  <fieldset class="person-name-given">\n    <label class="col-3">',k={hash:{},data:e},l+=n((i=c.t||b.t,i?i.call(b,"customInputs:CreatorField.person.name_given",k):p.call(b,"t","customInputs:CreatorField.person.name_given",k)))+'</label>\n    <input data-attribute="name_given" class="col-3" type="text" />\n  </fieldset>\n  <fieldset class="person-affiliation">\n    <label class="col-3">',k={hash:{},data:e},l+=n((i=c.t||b.t,i?i.call(b,"customInputs:CreatorField.person.affiliation",k):p.call(b,"t","customInputs:CreatorField.person.affiliation",k)))+'</label>\n    <input data-attribute="affiliation_name" class="col-3" type="text" />\n  </fieldset>\n  <fieldset class="person-affiliation-role">\n    <label class="col-3">',k={hash:{},data:e},l+=n((i=c.t||b.t,i?i.call(b,"customInputs:CreatorField.person.affiliation_role",k):p.call(b,"t","customInputs:CreatorField.person.affiliation_role",k)))+'</label>\n    <select class="col-3 select-affiliation-role">\n      ',j=c.each.call(b,b.affiliationRoles,{hash:{},inverse:o.noop,fn:o.program(1,f,e),data:e}),(j||0===j)&&(l+=j),l+="\n    </select>\n  </fieldset>\n</fieldset>\n"}),this.blf.templates.preloaded["templates/CreatorField.handlebars"]=Handlebars.template(function(a,b,c,d,e){this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var f,g,h="",i="function",j=this.escapeExpression,k=c.helperMissing;return h+='<fieldset class="customInput CreatorField">\n  <div class="message"></div>\n  <label>\n    ',(f=c.label)?f=f.call(b,{hash:{},data:e}):(f=b.label,f=typeof f===i?f.apply(b):f),h+=j(f)+' <button class="action add-creator" title="',g={hash:{},data:e},h+=j((f=c.t||b.t,f?f.call(b,"customInputs:CreatorField.actions.add",g):k.call(b,"t","customInputs:CreatorField.actions.add",g)))+'">',g={hash:{},data:e},h+=j((f=c.t||b.t,f?f.call(b,"customInputs:CreatorField.actions.add",g):k.call(b,"t","customInputs:CreatorField.actions.add",g)))+' <i class="fa fa-plus-circle"></i></button>\n  </label>\n  <div class="creators-container container">\n    <ul class="creators-list"></ul>\n    \n  </div>\n</fieldset>\n'
}),this.blf.templates.preloaded["templates/CreatorField.line.handlebars"]=Handlebars.template(function(a,b,c,d,e){function f(a,b){var d,e="";return e+="\n      ",d=c["if"].call(a,a.separator,{hash:{},inverse:o.program(4,h,b),fn:o.program(2,g,b),data:b}),(d||0===d)&&(e+=d),e+="\n    "}function g(){return'\n        <option class="disabled" disabled="disabled">---</option>\n      '}function h(a){var b,c="";return c+='\n        <option value="'+n((b=a.type_id,typeof b===m?b.apply(a):b))+'">'+n((b=a.label,typeof b===m?b.apply(a):b))+"</option>\n      "}this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var i,j,k,l="",m="function",n=this.escapeExpression,o=this,p=c.helperMissing;return l+='<li data-id="',(i=c.id)?i=i.call(b,{hash:{},data:e}):(i=b.id,i=typeof i===m?i.apply(b):i),l+=n(i)+'">\n  <select class="col-3 select-type">\n    <option value="Person">',k={hash:{},data:e},l+=n((i=c.t||b.t,i?i.call(b,"customInputs:CreatorField.line.Person",k):p.call(b,"t","customInputs:CreatorField.line.Person",k)))+'</option>\n    <option value="Orgunit">',k={hash:{},data:e},l+=n((i=c.t||b.t,i?i.call(b,"customInputs:CreatorField.line.Orgunit",k):p.call(b,"t","customInputs:CreatorField.line.Orgunit",k)))+'</option>\n    <option value="Event">',k={hash:{},data:e},l+=n((i=c.t||b.t,i?i.call(b,"customInputs:CreatorField.line.Event",k):p.call(b,"t","customInputs:CreatorField.line.Event",k)))+'</option>\n  </select>\n  <select class="col-3 select-role">\n    ',j=c.each.call(b,b.creators,{hash:{},inverse:o.noop,fn:o.program(1,f,e),data:e}),(j||0===j)&&(l+=j),l+='\n  </select>\n  <div class="actions">\n    <button class="remove-creator">-</button>\n    <button class="moveup-creator">↑</button>\n    <button class="movedown-creator">↓</button>\n  </div>\n  <div class="col-6 custom-container">\n  </div>\n</li>\n'}),this.blf.templates.preloaded["templates/CreatorField.roles.handlebars"]=Handlebars.template(function(a,b,c,d,e){this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var f,g="",h="function",i=this.escapeExpression;return g+='<option value="',(f=c.type_id)?f=f.call(b,{hash:{},data:e}):(f=b.type_id,f=typeof f===h?f.apply(b):f),g+=i(f)+'">',(f=c.label)?f=f.call(b,{hash:{},data:e}):(f=b.label,f=typeof f===h?f.apply(b):f),g+=i(f)+"</option>\n"}),this.blf.templates.preloaded["templates/DateField.handlebars"]=Handlebars.template(function(a,b,c,d,e){this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var f,g="",h="function",i=this.escapeExpression;return g+='<fieldset class="DateField">\n  <div class="message"></div>\n  <label for="',(f=c.property)?f=f.call(b,{hash:{},data:e}):(f=b.property,f=typeof f===h?f.apply(b):f),g+=i(f)+'">\n    ',(f=c.label)?f=f.call(b,{hash:{},data:e}):(f=b.label,f=typeof f===h?f.apply(b):f),g+=i(f)+' :\n  </label>\n  <input class="col-6" name="',(f=c.property)?f=f.call(b,{hash:{},data:e}):(f=b.property,f=typeof f===h?f.apply(b):f),g+=i(f)+'" type="year" />\n</fieldset>\n'}),this.blf.templates.preloaded["templates/IdentifierField.handlebars"]=Handlebars.template(function(a,b,c,d,e){this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var f,g,h="",i="function",j=this.escapeExpression,k=c.helperMissing;return h+='<fieldset class="customInput IdentifierField">\n  <div class="message"></div>\n  <label>\n    ',(f=c.label)?f=f.call(b,{hash:{},data:e}):(f=b.label,f=typeof f===i?f.apply(b):f),h+=j(f)+' :\n  </label>\n  <button class="action add-identifier">',g={hash:{},data:e},h+=j((f=c.t||b.t,f?f.call(b,"customInputs:IdentifierField.actions.add",g):k.call(b,"t","customInputs:IdentifierField.actions.add",g)))+' <i class="fa fa-plus-circle"></i></button>\n  <div class="identifier-container container">\n    <ul class="identifiers-list"></ul>\n  </div>\n</fieldset>\n'}),this.blf.templates.preloaded["templates/IdentifierField.line.handlebars"]=Handlebars.template(function(a,b,c,d,e){this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var f,g,h="",i="function",j=this.escapeExpression,k=c.helperMissing;return h+='<li class="line">\n  <input type="text" class="col-4" value="',(f=c.value)?f=f.call(b,{hash:{},data:e}):(f=b.value,f=typeof f===i?f.apply(b):f),h+=j(f)+'" />\n  <button class="remove-identifier">',g={hash:{},data:e},h+=j((f=c.t||b.t,f?f.call(b,"customInputs:IdentifierField.actions.remove",g):k.call(b,"t","customInputs:IdentifierField.actions.remove",g)))+"</button>\n</li>\n"}),this.blf.templates.preloaded["templates/IntegerField.handlebars"]=Handlebars.template(function(a,b,c,d,e){this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var f,g="",h="function",i=this.escapeExpression;return g+='<fieldset class="IntegerField">\n  <div class="message"></div>\n  <label for="',(f=c.property)?f=f.call(b,{hash:{},data:e}):(f=b.property,f=typeof f===h?f.apply(b):f),g+=i(f)+'">\n    ',(f=c.label)?f=f.call(b,{hash:{},data:e}):(f=b.label,f=typeof f===h?f.apply(b):f),g+=i(f)+' :\n  </label>\n  <input class="col-6" name="',(f=c.property)?f=f.call(b,{hash:{},data:e}):(f=b.property,f=typeof f===h?f.apply(b):f),g+=i(f)+'" type="number" />\n</fieldset>\n'}),this.blf.templates.preloaded["templates/KeywordField.handlebars"]=Handlebars.template(function(a,b,c,d,e){this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var f,g,h="",i="function",j=this.escapeExpression,k=c.helperMissing;return h+='<fieldset class="customInput KeywordField">\n  <div class="message"></div>\n  <label>\n    ',(f=c.label)?f=f.call(b,{hash:{},data:e}):(f=b.label,f=typeof f===i?f.apply(b):f),h+=j(f)+' :\n  </label>\n  <button class="action add-language">',g={hash:{},data:e},h+=j((f=c.t||b.t,f?f.call(b,"customInputs:KeywordField.actions.add",g):k.call(b,"t","customInputs:KeywordField.actions.add",g)))+' <i class="fa fa-plus-circle"></i></button>\n  <div class="languages-container container">\n    <ul class="languages-list"></ul>\n    \n  </div>\n</fieldset>\n'}),this.blf.templates.preloaded["templates/KeywordField.line.handlebars"]=Handlebars.template(function(a,b,c,d,e){function f(a,b){var d,e="";return e+="\n      ",d=c["if"].call(a,a.separator,{hash:{},inverse:m.program(4,h,b),fn:m.program(2,g,b),data:b}),(d||0===d)&&(e+=d),e+="\n    "}function g(){return'\n        <option class="disabled" disabled="disabled">---</option>\n      '}function h(a){var b,c="";return c+='\n        <option value="'+l((b=a.id,typeof b===k?b.apply(a):b))+'">'+l((b=a.label,typeof b===k?b.apply(a):b))+"</option>\n      "}this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var i,j="",k="function",l=this.escapeExpression,m=this;return j+='<li>\n  <select class="select-language">\n    ',i=c.each.call(b,b.languages,{hash:{},inverse:m.noop,fn:m.program(1,f,e),data:e}),(i||0===i)&&(j+=i),j+='\n  </select>\n  <button class="remove-language">-</button>\n  <textarea class="col-6"></textarea>\n</li>\n'}),this.blf.templates.preloaded["templates/LanguageValueField.handlebars"]=Handlebars.template(function(a,b,c,d,e){this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var f,g,h="",i="function",j=this.escapeExpression,k=c.helperMissing;return h+='<fieldset class="customInput LanguageValueField">\n  <div class="message"></div>\n  <label>\n    ',(f=c.label)?f=f.call(b,{hash:{},data:e}):(f=b.label,f=typeof f===i?f.apply(b):f),h+=j(f)+' :\n  </label>\n  <button class="action add-language">',g={hash:{},data:e},h+=j((f=c.t||b.t,f?f.call(b,"customInputs:LanguageValueField.actions.add",g):k.call(b,"t","customInputs:LanguageValueField.actions.add",g)))+' <i class="fa fa-plus-circle"></i></button>\n  <div class="languages-container container">\n    <ul class="languages-list"></ul>\n    \n  </div>\n</fieldset>\n'}),this.blf.templates.preloaded["templates/LanguageValueField.line.handlebars"]=Handlebars.template(function(a,b,c,d,e){function f(a,b){var d,e="";return e+="\n      ",d=c["if"].call(a,a.separator,{hash:{},inverse:m.program(4,h,b),fn:m.program(2,g,b),data:b}),(d||0===d)&&(e+=d),e+="\n    "}function g(){return'\n        <option class="disabled" disabled="disabled">---</option>\n      '}function h(a){var b,c="";return c+='\n        <option value="'+l((b=a.id,typeof b===k?b.apply(a):b))+'">'+l((b=a.label,typeof b===k?b.apply(a):b))+"</option>\n      "}this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var i,j="",k="function",l=this.escapeExpression,m=this;return j+='<li>\n  <select class="select-language">\n    ',i=c.each.call(b,b.languages,{hash:{},inverse:m.noop,fn:m.program(1,f,e),data:e}),(i||0===i)&&(j+=i),j+='\n  </select>\n  <button class="remove-language">-</button>\n  <textarea class="col-6"></textarea>\n</li>\n'}),this.blf.templates.preloaded["templates/StringField.handlebars"]=Handlebars.template(function(a,b,c,d,e){this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var f,g="",h="function",i=this.escapeExpression;return g+='<fieldset class="StringField">\n  <div class="message"></div>\n  <label for="',(f=c.property)?f=f.call(b,{hash:{},data:e}):(f=b.property,f=typeof f===h?f.apply(b):f),g+=i(f)+'">\n    ',(f=c.label)?f=f.call(b,{hash:{},data:e}):(f=b.label,f=typeof f===h?f.apply(b):f),g+=i(f)+' :\n  </label>\n  <span class="col-6 inline-block value" name="',(f=c.property)?f=f.call(b,{hash:{},data:e}):(f=b.property,f=typeof f===h?f.apply(b):f),g+=i(f)+'"></span>\n</fieldset>\n'}),this.blf.templates.preloaded["templates/TypeField.handlebars"]=Handlebars.template(function(a,b,c,d,e){function f(a,b){var d,e,f="";return f+='\n      <button class="action add-value">',e={hash:{},data:b},f+=j((d=c.t||a.t,d?d.call(a,"customInputs:TypeField.actions.add",e):i.call(a,"t","customInputs:TypeField.actions.add",e)))+' <i class="fa fa-plus-circle"></i></button>\n    '}this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var g,h="",i=c.helperMissing,j=this.escapeExpression,k="function",l=this;return h+='<fieldset class="customInput TypeField">\n  <div class="message"></div>\n  <label>\n    ',(g=c.label)?g=g.call(b,{hash:{},data:e}):(g=b.label,g=typeof g===k?g.apply(b):g),h+=j(g)+" :\n  </label>\n  ",g=c["if"].call(b,b.multi,{hash:{},inverse:l.noop,fn:l.program(1,f,e),data:e}),(g||0===g)&&(h+=g),h+='\n  <div class="types-container container">\n    <ul class="values-list"></ul>\n    \n  </div>\n</fieldset>\n'}),this.blf.templates.preloaded["templates/TypeField.line.handlebars"]=Handlebars.template(function(a,b,c,d,e){this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var f,g="",h="function";return g+='<li>\n  <select class="select-in-type col-3">\n    ',(f=c.content)?f=f.call(b,{hash:{},data:e}):(f=b.content,f=typeof f===h?f.apply(b):f),(f||0===f)&&(g+=f),g+="\n  </select>\n  <button class=\"remove-value\"><i icon='icon-remove'></i></button>\n</li>\n"}),this.blf.templates.preloaded["templates/YearRangeField.handlebars"]=Handlebars.template(function(a,b,c,d,e){this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var f,g,h="",i="function",j=this.escapeExpression,k=c.helperMissing;return h+='<fieldset class="customInput YearRangeField">\n  <span class="title">',(f=c.label)?f=f.call(b,{hash:{},data:e}):(f=b.label,f=typeof f===i?f.apply(b):f),h+=j(f)+" :</span>\n  ",g={hash:{},data:e},h+=j((f=c.t||b.t,f?f.call(b,"commons.between",g):k.call(b,"t","commons.between",g)))+' <input type="year" class="date-from" /> ',g={hash:{},data:e},h+=j((f=c.t||b.t,f?f.call(b,"commons.and",g):k.call(b,"t","commons.and",g)))+' <input type="year" class="date-to" />\n</fieldset>\n'}),this.blf.templates.preloaded["templates/advancedSearchPanel.handlebars"]=Handlebars.template(function(a,b,c,d,e){this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var f,g,h="",i=c.helperMissing,j=this.escapeExpression;return h+='<div class="index-container"></div>\n<div class="filter-container"></div>\n<button class="validate-advanced-search">',g={hash:{},data:e},h+=j((f=c.t||b.t,f?f.call(b,"actions.search",g):i.call(b,"t","actions.search",g)))+"</button>\n"}),this.blf.templates.preloaded["templates/advancedSearchPanel.index.handlebars"]=Handlebars.template(function(a,b,c,d,e){function f(a,b,d){var e,f,h,j="";return j+='\n    <li class="index">\n      <select data-type="operator">\n      ',e=c.each.call(a,d.operators,{hash:{},inverse:n.noop,fn:n.programWithDepth(2,g,b,a),data:b}),(e||0===e)&&(j+=e),j+='\n      </select>\n      <input data-type="value" type="text" placeholder="',h={hash:{},data:b},j+=m((e=c.t||d.t,e?e.call(a,"commons.ellipsis",h):o.call(a,"t","commons.ellipsis",h)))+'" value="',(f=c.value)?f=f.call(a,{hash:{},data:b}):(f=a.value,f=typeof f===l?f.apply(a):f),j+=m(f)+'" />\n      <select data-type="index">\n      ',f=c.each.call(a,d.indexes,{hash:{},inverse:n.noop,fn:n.programWithDepth(5,i,b,a),data:b}),(f||0===f)&&(j+=f),j+='\n      </select>\n      <button class="remove-index">-</button>\n    </li>\n  '}function g(a,b,d){var e,f,g,i="";return i+='\n        <option value="',(e=c.type_id)?e=e.call(a,{hash:{},data:b}):(e=a.type_id,e=typeof e===l?e.apply(a):e),i+=m(e)+'"',g={hash:{},inverse:n.noop,fn:n.program(3,h,b),data:b},e=c.ifCond||a.ifCond,f=e?e.call(a,a.type_id,"==",d.operator,g):o.call(a,"ifCond",a.type_id,"==",d.operator,g),(f||0===f)&&(i+=f),i+=">",(f=c.label)?f=f.call(a,{hash:{},data:b}):(f=a.label,f=typeof f===l?f.apply(a):f),i+=m(f)+"</option>\n      "}function h(){return" selected"}function i(a,b,d){var e,f,g,i="";return i+='\n        <option value="',(e=c.type_id)?e=e.call(a,{hash:{},data:b}):(e=a.type_id,e=typeof e===l?e.apply(a):e),i+=m(e)+'"',g={hash:{},inverse:n.noop,fn:n.program(3,h,b),data:b},e=c.ifCond||a.ifCond,f=e?e.call(a,a.type_id,"==",d.index,g):o.call(a,"ifCond",a.type_id,"==",d.index,g),(f||0===f)&&(i+=f),i+=">",(f=c.label)?f=f.call(a,{hash:{},data:b}):(f=a.label,f=typeof f===l?f.apply(a):f),i+=m(f)+"</option>\n      "}this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var j,k="",l="function",m=this.escapeExpression,n=this,o=c.helperMissing;return k+='<fieldset>\n  <ul class="indexes-list">\n  ',j=c.each.call(b,b.indexesArray,{hash:{},inverse:n.noop,fn:n.programWithDepth(1,f,e,b),data:e}),(j||0===j)&&(k+=j),k+='\n  </ul>\n  <button class="right add-index">+</button>\n</fieldset>\n'}),this.blf.templates.preloaded["templates/createPanel.validate.handlebars"]=Handlebars.template(function(a,b,c,d,e){this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var f,g,h="",i=c.helperMissing,j=this.escapeExpression;return h+='<button class="validate-button">',g={hash:{},data:e},h+=j((f=c.t||b.t,f?f.call(b,"actions.validate",g):i.call(b,"t","actions.validate",g)))+"</button>\n"}),this.blf.templates.preloaded["templates/main.handlebars"]=Handlebars.template(function(a,b,c,d,e){this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var f,g,h="",i=c.helperMissing,j=this.escapeExpression;return h+='\n<div id="nav" class="container">\n  <button data-mode="fields">',g={hash:{},data:e},h+=j((f=c.t||b.t,f?f.call(b,"navigation.addEntry",g):i.call(b,"t","navigation.addEntry",g)))+'</button>\n  <button class="right" data-mode="advancedSearch">',g={hash:{},data:e},h+=j((f=c.t||b.t,f?f.call(b,"navigation.advancedSearch",g):i.call(b,"t","navigation.advancedSearch",g)))+'</button>\n  <button class="right" data-action="search">',g={hash:{},data:e},h+=j((f=c.t||b.t,f?f.call(b,"navigation.search",g):i.call(b,"t","navigation.search",g)))+'</button>\n  <input class="right" type="search" id="simple-entries-search" placeholder="',g={hash:{},data:e},h+=j((f=c.t||b.t,f?f.call(b,"navigation.searchPlaceholder",g):i.call(b,"t","navigation.searchPlaceholder",g)))+'" />\n</div>\n<hr />\n\n\n<div id="panels" class="container">\n  <div data-panel="create" style="display:none;">\n    <div class="create-form"></div>\n  </div>\n  <div data-panel="fields" style="display:none;">\n    <div class="select-field"></div>\n  </div>\n  <div data-panel="advancedSearch" style="display:none;">\n    <div class="advanced-search"></div>\n  </div>\n  <div data-panel="list" style="display:none;">\n    <ul class="entries-list"></ul>\n  </div>\n</div>\n'}),function(){"use strict";mlab.pkg("blf.modules"),blf.templates.require(["advancedSearchPanel","advancedSearchPanel.index"]),blf.modules.advancedSearchPanel=function(a,b){function c(){var a=[];return $(".index",i).each(function(){var b=$(this);a.push({index:$('[data-type="index"]',b).val(),value:$('[data-type="value"]',b).val(),operator:$('[data-type="operator"]',b).val()})}),a}function d(){var a,b,d,e,f={};for(f.search_terms=c().filter(function(a){return a.value}),a=0,b=g.length;b>a;a++)e=g[a],d=blf.modules.createPanel.getData(e,f),void 0!==d&&void 0!==e.property&&(f[e.property]=d);return f}function e(){var a=$(".index-container",i).empty();k&&a.append($(blf.templates.get("advancedSearchPanel.index")(k)))}function f(){k.indexesArray=k.default_index.map(function(a){return"string"==typeof a?{index:a,value:"",operator:k.default_operator}:a}),g=blf.modules.createPanel.generateForm(b,l).components,$(".filter-container",i).empty().append(g.map(function(a){return a.dom})),e()}domino.module.call(this);var g,h=this,i=a,j=blf.utils.translateLabels(b.get("config").advancedSearchPanel||{},b.get("assets_lang")),k=j.index,l=j.filters;i.append($(blf.templates.get("advancedSearchPanel")())),window.setTimeout(function(){[k.property_source_index,k.property_source_operator].forEach(function(a){a&&h.dispatchEvent("loadList",{list:a})})},0),i.on("click",".add-index",function(){k.indexesArray=c().concat({index:k.indexes[0].type_id,value:"",operator:k.default_operator}),e()}).on("click",".remove-index",function(a){k.indexesArray.splice($(a.target).closest(".index").index(),1),e()}).on("click",".validate-advanced-search",function(){h.dispatchEvent("search",{query:d()})}),f(),this.triggers.events.listsUpdated=function(a){if(k){var b=a.get("lists")[k.property_source_index],c=a.get("lists")[k.property_source_operator];!k.indexes&&b&&(k.indexes=b,e()),!k.operators&&c&&(k.operators=c,e())}},this.triggers.events.modeUpdated=function(a){"advancedSearch"!==a.get("mode")&&f()},this.triggers.events.listsUpdated(b)}}(),function(){"use strict";mlab.pkg("blf.modules.customInputs"),blf.templates.require(["DateField","IntegerField","createPanel.validate"]),blf.modules.createPanel=function(a,b){domino.module.call(this);var c=this,d=a;this.triggers.events.displayForm=function(a,e){var f=e.data.entry,g=(a.get("fields")[e.data.field],blf.modules.createPanel.generateForm(b,a.get("fields")[e.data.field].children));$(".create-form",d).empty().append(g.components.map(function(a){return a.dom})),$(blf.templates.get("createPanel.validate")()).click(function(){g.validate()&&c.dispatchEvent("validateEntry",{entry:g.getData()})}).appendTo($(".create-form",d)),g.fill(f||{rec_type:e.data.field})}},mlab.pkg("blf.modules.createPanel.defaultMethods"),blf.modules.createPanel.generateForm=function(a,b){function c(){var a,b,c=domino.utils.clone(i);for(a in j)c[a]=j[a];for(f=0,g=l.length;g>f;f++)h=l[f],b=blf.modules.createPanel.getData(h,c),void 0===h.property||void 0===b||null===b||b instanceof Array&&!b.length||"number"==typeof b&&isNaN(b)||""===b||(c[h.property]=b);return c}function d(){var b=0;return a.log("Form validation:"),l.forEach(function(c){var d=blf.modules.createPanel.validate(c);d||b++,d||a.log("  - Invalid component:",c.property)}),0===b?(a.log("  - Everything is valid"),!0):!1}function e(b){var c,d={};i=k.reduce(function(a,c){return c in b&&(a[c]=domino.utils.clone(b[c])),a},{});for(c=0,g=l.length;g>c;c++)h=l[c],d[h.property]&&a.log('Hum, the property "'+h.property+'" has already been given to a component...'),d[h.property]=1,b&&blf.modules.createPanel.fill(h,b);for(c in b)d[c]||a.log("Property not parsed:",c,"value:",b[c])}var f,g,h,i={},j={rec_class:"Document"},k=["_id","rec_class","rec_created_date","rec_id","rec_modified_date","rec_source","rec_status","rec_type","nonce"],l=[];for(f=0,g=b.length;g>f;f++)l.push(blf.modules.createPanel.getComponent(a,b[f]));return{components:l,validate:d,getData:c,fill:e}},blf.modules.createPanel.getComponent=function(a,b){var c,d,e=blf.modules.customInputs[b.type_ui];return"function"==typeof e?(e=a.addModule(e,[b,a]),c=e.getComponent()):(d=blf.templates.get(b.type_ui))?c={propertyObject:b,property:b.property,dom:$(d({label:b.label||b.labels[a.get("assets_lang")],property:b.property}))}:a.warn('Data type "'+b.type_ui+'" not recognized.'),c},blf.modules.createPanel.getData=function(a,b){return a.getData?a.getData(b):blf.modules.createPanel.defaultMethods.getData.call(a)},blf.modules.createPanel.fill=function(a,b){a.fill?a.fill(a.property?b[a.property]:null,b):blf.modules.createPanel.defaultMethods.fill.call(a,b[a.property],b)},blf.modules.createPanel.validate=function(a){return a.validate?a.validate():blf.modules.createPanel.defaultMethods.validate.call(a)},blf.modules.createPanel.defaultMethods.getData=function(){var a=$("input",this.dom).val();return""===a&&(a=void 0),"number"===$("input",this.dom).attr("type")&&(a=+a),void 0!==a&&this.propertyObject.multiple&&(a=[a]),a},blf.modules.createPanel.defaultMethods.fill=function(a){$("input",this.dom).val(a)},blf.modules.createPanel.defaultMethods.validate=function(){var a;return a=this.propertyObject.required?void 0!==blf.modules.createPanel.getData(this):!0,a?$(".message",this.dom).empty():$(".message",this.dom).text(i18n.t("customInputs:TypeField.errors.at_least_one")),a}}(),function(){"use strict";mlab.pkg("blf.modules.customInputs"),blf.modules.fieldsPanel=function(a){domino.module.call(this);var b=this,c=a;$(".select-field",c).click(function(a){var c=$(a.target);return c.is("a[data-field]")?(b.dispatchEvent("openField",{field:c.attr("data-field")}),a.stopPropagation(),!1):void 0}),this.triggers.events.fieldsTreeUpdated=function(a){var b,d=a.get("fieldsTree");b=function e(a,b){var c=!a.label||a.bundle||a.deprecated?a.label?"<span>"+a.label+"</span>":"":'<a href="#" data-field="'+a.type_id+'">'+a.label+"</a>";return c+((a.children||[]).length?'<ul class="tree-depth-'+b+'">'+a.children.map(function(a){return"<li>"+e(a,b+1)+"</li>"}).join("")+"</ul>":"")}(d,0),$(".select-field",c).empty().append(b)}}}(),function(){"use strict";mlab.pkg("blf.modules"),blf.modules.listPanel=function(a){function b(){$("> ul",g).empty()}function c(a){b();var c=a.get("availableFields"),e=$("> ul",g).empty();d.forEach(function(a){var b=c[a.rec_type];e.append('<li data-id="'+a.rec_id+'"><div class="buttons-container"><button class="delete-entry">-</button>'+(b?'<button class="edit-entry">edit</button>':"")+'</div><span class="entry-type">('+a.rec_type+')</span> <span class="entry-title" title="'+a.title+'">'+a.title+"</span></li>")})}domino.module.call(this);var d,e,f=this,g=a;g.click(function(a){var b,c=$(a.target),d=c.parents("ul > li");return d.length&&c.is(".delete-entry")?(b=d.attr("data-id"),f.dispatchEvent("deleteEntry",{rec_id:b}),a.stopPropagation(),!1):d.length&&c.is(".edit-entry")?(b=d.attr("data-id"),f.dispatchEvent("editEntry",{entryId:b,entry:e[b]}),a.stopPropagation(),!1):void 0}),this.triggers.events.modeUpdated=function(a){"list"!==a.get("mode")&&b()},this.triggers.events.resultsListUpdated=function(a){d=a.get("resultsList"),e=mlab.array.index(d,"rec_id"),c(a)}}}(),function(){"use strict";mlab.pkg("blf.modules.customInputs"),blf.templates.require("BooleanField"),blf.modules.customInputs.BooleanField=function(a){function b(){f=$(blf.templates.get("BooleanField")({label:a.label}))}function c(a){$("input",f).attr("checked",a)}function d(){return $("input",f).is(":checked")}function e(){return!0}domino.module.call(this);var f;b(),this.getComponent=function(){return{dom:f,fill:c,getData:d,validate:e,propertyObject:a,property:a.property}}}}(),function(){"use strict";mlab.pkg("blf.modules.customInputs"),blf.templates.require(["CharField","CharField.line"]),blf.modules.customInputs.CharField=function(a,b){function c(){!a.multiple||a.only_one&&$("li",h).length?$("button.add-line",h).css("display","none"):$("button.add-line",h).css("display","")}function d(a){var b=$(blf.templates.get("CharField.line")({value:a||""}));$("ul.lines",h).append(b),c()}function e(b){$("ul.lines",h).empty(),domino.struct.check("array",b)?b.forEach(d):b&&d(b),b||d(),a.multiple||$("button.remove-line",h).remove()}function f(b){var c,d,e=$("li",h);return b=b||{},a.multiple?(c=[],e.each(function(){d=$(this).find("input").val(),d&&c.push(d)})):c=e.length?$("li:first-child input",h).val():void 0,("array"===domino.struct.get(c)?c.length:c)&&(b[a.property]=(b[a.property]||[]).concat(c)),c}function g(){var b=f();return!a.multiple&&a.required&&!b||a.multiple&&a.required&&a.only_one&&!b?($(".message",h).text(i18n.t("customInputs:CharField.errors.exactly_one")),!1):a.multiple&&a.required&&b.length<1?($(".message",h).text(i18n.t("customInputs:CharField.errors.at_least_one")),!1):($(".message",h).empty(),!0)}domino.module.call(this);var h;h=$(blf.templates.get("CharField")({property:a.property,label:a.label||a.labels[b.get("assets_lang")]})),$("button.add-line",h).click(function(){d()}),h.click(function(a){var b=$(a.target),d=b.closest("li");d.length&&b.is("button.remove-line")&&(d.remove(),c())}),a.required&&($("button.add-line",h).click(),$("li:first-child button.remove-line",h).css("display","none")),this.getComponent=function(){return{dom:h,fill:e,getData:f,validate:g,propertyObject:a,property:a.property}}}}(),function(){"use strict";mlab.pkg("blf.modules.customInputs"),blf.templates.require("CheckboxField"),blf.modules.customInputs.CheckboxField=function(a,b){function c(){var b=$(blf.templates.get("CheckboxField")({label:a.label,values:h}));g&&g.replaceWith(b),g=b}function d(a){var b=mlab.array.index(a,null);$('[type="checkbox"]',g).each(function(){var a=$(this);a.attr("checked",b[a.data("type-id")]?"checked":null)})}function e(){var a=[];return $('[type="checkbox"]:checked',g).each(function(){a.push($(this).data("type-id"))}),a.length?a:void 0}function f(){return!0}domino.module.call(this);var g,h=b.get("lists")[a.type_source]||[],i=h.filter(function(a){return a.major}),j=this;i.length&&(h=i),c(),window.setTimeout(function(){h.length||j.dispatchEvent("loadList",{list:a.type_source})},0),this.getComponent=function(){return{dom:g,fill:d,getData:e,validate:f,propertyObject:a,property:a.property}},this.triggers.events.listsUpdated=function(b){!h.length&&b.get("lists")[a.type_source]&&(h=b.get("lists")[a.type_source],i=h.filter(function(a){return a.major}),i.length&&(h=i),c())}}}(),function(){"use strict";mlab.pkg("blf.modules.customInputs"),blf.templates.require(["ComponentField","ComponentField.line"]),blf.modules.customInputs.ComponentField=function(a,b){function c(c){c=c||{};var e=j++,f=$(blf.templates.get("ComponentField.line")({id:e,type_fields:[{text:i18n.t("customInputs:ComponentField.messages.select_type"),title:!0},{separator:!0}].concat(a.type_fields.map(function(a){return{id:a,label:(m[a]||{}).label||a}}))}));a.type_fields.length<=1&&$("select.select-field",f).first().css("display","none"),c.rec_type?($("select.select-field",f).first().val(c.rec_type),l[e]=blf.modules.createPanel.generateForm(b,m[c.rec_type].children),$(".custom-container",f).first().empty().append(l[e].components.map(function(a){return a.dom})),l[e].fill(c)):Object.keys(c).length&&($("select.select-field",f).first().val(a.type_fields[0]),l[e]=blf.modules.createPanel.generateForm(b,m[a.type_fields[0]].children),$(".custom-container",f).first().empty().append(l[e].components.map(function(a){return a.dom})),l[e].fill(c)),i.append(f),(!a.multiple||a.only_one)&&i.children("li").length>=1?$(".add-document",h).css("display","none"):$(".add-document",h).css("display",""),c.rec_type||1!==a.type_fields.length||Object.keys(c).length||($("select.select-field",f).first().val(a.type_fields[0]),d(f,a.type_fields[0]))}function d(a,c){l[a.data("id")]=blf.modules.createPanel.generateForm(b,m[c].children),l[a.data("id")].fill({rec_type:c}),$(".custom-container",a).first().empty().append(l[a.data("id")].components.map(function(a){return a.dom}))}function e(){var b,c=0,d=g();if($(".message",h).first().empty(),!a.multiple&&a.required&&!d)return $(".message",h).first().text(i18n.t("customInputs:ComponentField.errors.exactly_one")),!1;if(a.only_one&&a.required&&1!==(d||[]).length)return $(".message",h).first().text(i18n.t("customInputs:ComponentField.errors.exactly_one")),!1;if(!a.only_one&&a.multiple&&a.required&&!(d||[]).length)return $(".message",h).first().text(i18n.t("customInputs:ComponentField.errors.at_least_one")),!1;for(b in l)l[b].validate()||c++;return 0===c}function f(b){i.empty(),a.multiple?(b||[]).forEach(c):c(b)}function g(){var c=[];return i.children("li").each(function(){var a,d,e,f=$(this),g=f.data("id");return l[g]?(e=l[g].getData(),d=$("select.select-field",f).first().val(),d&&(a=b.get("fields")[d])&&"rec_class_component"in a?(e.rec_class=a.rec_class_component,e.rec_type=a.rec_type):(delete e.rec_class,delete e.rec_type),void c.push(e)):void 0}),a.multiple?c.length?c:void 0:c[0]}domino.module.call(this);var h=$(blf.templates.get("ComponentField")({label:a.label||a.labels[b.get("assets_lang")]})),i=$("ul",h).first(),j=1,k=this,l={},m=b.get("fields");window.setTimeout(function(){a.type_fields.forEach(function(a){k.dispatchEvent("loadField",{field:a})})},0),$("button.add-document",h).click(function(){c()}),h.click(function(b){var c=$(b.target),d=c.closest("li").first();if(d.length&&c.is("button.remove-document")){var e=d.data("id");d.remove(),delete l[e],a.only_one&&i.children("li").length>=1?$(".add-document",h).css("display","none"):$(".add-document",h).css("display","")}}).change(function(a){var b=$(a.target),c=b.closest("li");c.length&&b.is(i.children("li").children("select.select-field"))&&("blf.placeholder"===b.val()?$(".custom-container",c).first().empty():d(c,b.val()))}),this.getComponent=function(){return{dom:h,fill:f,getData:g,validate:e,propertyObject:a,property:a.property}},this.triggers.events.fieldsUpdated=function(b){a.type_fields.every(function(a){return m[a]})||(m=b.get("fields"),i.children("li").each(function(){$(this).find("select.select-field").first().html(a.type_fields.filter(function(a){return m[a]}).map(function(a){var b=m[a];return'<option value="'+b.rec_type+'">'+b.rec_type+"</option>"}).join())}))}}}(),function(){"use strict";mlab.pkg("blf.modules.customInputs"),blf.templates.require(["CreatorField","CreatorField.line","CreatorField.roles","CreatorField.Person","CreatorField.Orgunit","CreatorField.Event"]),blf.modules.customInputs.CreatorField=function(a,b){function c(a){a=a||{};var c=i++,d=$(blf.templates.get("CreatorField.line")({id:c,creators:k.map(function(a){return a.separator?{separator:!0}:{type_id:a.type_id,label:a.label||a.labels[b.get("assets_lang")]}})})),e=a.agent||{};a.roles&&$("select.select-role",d).val(a.roles[0]),a.affiliation_role&&$("select.select-affiliation-role",d).val(a.affiliation_role),j[c]=h(e.rec_class||"Person"),$(".custom-container",d).append(j[c].dom),e.rec_class&&($("select.select-type",d).val(e.rec_class),j[c].fill(a,j[c])),$("ul.creators-list",g).append(d)}function d(){var b=f();return!a.required||b&&b.length?($(".message",g).empty(),!0):($(".message",g).text(i18n.t("customInputs:CreatorField.errors.at_least_one")),!1)}function e(a){$("ul.creators-list",g).empty();(a||[]).forEach(c)}function f(){var a=[];return $("ul.creators-list > li",g).each(function(){var b=$(this),c=b.data("id");a.push(j[c].getData({roles:[$("select.select-role",b).val()]},j[c]))}),a.length?a:void 0}domino.module.call(this);var g,h,i=1,j={},k=blf.utils.extractMajors(b.get("lists").creator_role||[]),l=blf.utils.extractMajors(b.get("lists").country||[]),m=blf.utils.extractMajors(b.get("lists").affiliation_role_person||[]);g=$(blf.templates.get("CreatorField")({label:a.label||a.labels[b.get("assets_lang")]})),h=function(a){var c={Person:{dom:$(blf.templates.get("CreatorField.Person")({affiliationRoles:m.map(function(a){return a.separator?{separator:!0}:{type_id:a.type_id,label:a.label||a.labels[b.get("assets_lang")]}})})),fill:function(a,b){return b.dom.data("id",a.agent.rec_id||null),$('input[data-attribute="name_prefix"]',b.dom).val(a.agent.name_prefix),$('input[data-attribute="name_family"]',b.dom).val(a.agent.name_family),$('input[data-attribute="name_given"]',b.dom).val(a.agent.name_given),void 0!==a.affiliation&&b.dom.data("aff_id",a.affiliation.agent.rec_id||null),$('input[data-attribute="affiliation_name"]',b.dom).val(((a.affiliation||{}).agent||{}).name),$("select.select-affiliation-role",b.dom).val((a.affiliation||{}).role),this
},getData:function(a,b){a.agent=a.agent||{rec_class:"Person"},b.dom.data("id")&&(a.agent.rec_id=b.dom.data("id")),a.agent.name_prefix=$('input[data-attribute="name_prefix"]',b.dom).val()||void 0,a.agent.name_family=$('input[data-attribute="name_family"]',b.dom).val()||void 0,a.agent.name_given=$('input[data-attribute="name_given"]',b.dom).val()||void 0;var c=$('input[data-attribute="affiliation_name"]',b.dom).val();if(c){a.affiliation={agent:{rec_class:"Orgunit",name:c}};var d=$("select.select-affiliation-role",b.dom).val();d&&(a.affiliation.role=d),b.dom.data("aff_id")&&(a.affiliation.agent.rec_id=b.dom.data("aff_id"))}for(var e in a.agent)void 0===a.agent[e]&&delete a.agent[e];return a}},Orgunit:{dom:$(blf.templates.get("CreatorField.Orgunit")()),fill:function(a,b){return b.dom.data("id",a.agent.rec_id||null),$('input[data-attribute="name"]',b.dom).val(a.agent.name),this},getData:function(a,b){a.agent=a.agent||{rec_class:"Orgunit"},b.dom.data("id")&&(a.agent.rec_id=b.dom.data("id")),a.agent.name=$('input[data-attribute="name"]',b.dom).val()||void 0;for(var c in a.agent)void 0===a.agent[c]&&delete a.agent[c];return a}},Event:{dom:$(blf.templates.get("CreatorField.Event")({creatorCountries:l.map(function(a){return a.separator?{separator:!0}:{type_id:a.type_id,label:a.label||a.labels[b.get("assets_lang")]}})})),fill:function(a,b){return b.dom.data("id",a.agent.rec_id||null),$('input[data-attribute="title"]',b.dom).val(a.agent.title),$('input[data-attribute="number"]',b.dom).val(a.agent.number),$('input[data-attribute="place"]',b.dom).val(a.agent.place),$('input[data-attribute="country"]',b.dom).val(a.agent.country),$('input[data-attribute="date_begin"]',b.dom).val(a.agent.date_begin),$('input[data-attribute="date_end"]',b.dom).val(a.agent.date_end),$('input[data-attribute="international"]',b.dom).attr("checked",a.agent.international?"checked":null),void 0!==a.agent.country&&$("select.select-event-country",b.dom).val((a.agent||{}).country),this},getData:function(a,b){a.agent=a.agent||{rec_class:"Event"},b.dom.data("id")&&(a.agent.rec_id=b.dom.data("id")),a.agent.title=$('input[data-attribute="title"]',b.dom).val()||void 0,a.agent.number=$('input[data-attribute="number"]',b.dom).val()||void 0,a.agent.place=$('input[data-attribute="place"]',b.dom).val()||void 0,a.agent.date_begin=$('input[data-attribute="date_begin"]',b.dom).val()||void 0,a.agent.date_end=$('input[data-attribute="date_end"]',b.dom).val()||void 0,a.agent.international=!!$('input[data-attribute="international"]',b.dom).is(":checked");var c=$("select.select-event-country",b.dom).val();c&&(a.agent.country=c);for(var d in a.agent)void 0===a.agent[d]&&delete a.agent[d];return a}}};return c[a]},$(".add-creator",g).click(function(){c()}),g.click(function(a){var b=$(a.target),c=b.parents("ul.creators-list > li");if(c.length&&b.is(".remove-creator")){var d=c.data("id");c.remove(),delete j[d]}else c.length&&b.is(".moveup-creator")?c.is(":first-child")||c.prev().before(c):c.length&&b.is(".movedown-creator")&&(c.is(":last-child")||c.next().after(c))}).change(function(a){var b=$(a.target),c=b.parents("ul.creators-list > li");if(c.length&&b.is("select.select-type")){var d=c.data("id"),e=b.val(),f=$(".custom-container",c);j[d]=h(e),f.empty().append(j[d].dom)}}),this.getComponent=function(){return{dom:g,fill:e,getData:f,validate:d,propertyObject:a,property:a.property}},this.triggers.events.creatorRolesUpdated=function(a){k=blf.utils.extractMajors(a.get("creatorRoles")||[]),$("select.select-role",dom).html(k.map(function(a){return blf.templates.get("CreatorField.roles")(a.separator?{separator:!0}:{type_id:a.type_id,label:a.label})}))}}}(),function(){"use strict";mlab.pkg("blf.modules.customInputs"),blf.templates.require(["IdentifierField","IdentifierField.line"]),blf.modules.customInputs.IdentifierField=function(a){function b(){a.multiple&&a.only_one&&$("li",g).length?$("button.add-identifier",g).css("display","none"):$("button.add-identifier",g).css("display","")}function c(a){var c=$(blf.templates.get("IdentifierField.line")({value:(a||{}).value||""}));$("ul.identifiers-list",g).append(c),b()}function d(b){$("ul.identifiers-list",g).empty(),(b||[]).filter(function(b){return b.id_type===a.id_type}).forEach(c)}function e(b){var c,d=$("li",g);return b=b||{},a.multiple?(c=b[a.property]||[],d.each(function(){c.push({id_type:a.id_type,value:$(this).find("input").val()})})):c=d.length?{id_type:a.id_type,value:$("li:first-child input",g).val()}:null,("array"!==domino.struct.get(c)||c.length)&&(b[a.property]=(b[a.property]||[]).concat(c)),c}function f(){var b=e();return!a.multiple&&a.required&&!b||a.multiple&&a.required&&a.only_one&&!b?($(".message",g).text(i18n.t("customInputs:IdentifierField.errors.exactly_one")),!1):a.multiple&&a.required&&b.length<1?($(".message",g).text(i18n.t("customInputs:IdentifierField.errors.at_least_one")),!1):($(".message",g).empty(),!0)}domino.module.call(this);var g;g=$(blf.templates.get("IdentifierField")({label:a.label||a.labels[controller.get("assets_lang")]})),$("button.add-identifier",g).click(function(){c()}),g.click(function(a){var c=$(a.target),d=c.closest("li");d.length&&c.is("button.remove-identifier")&&(d.remove(),b())}),a.required&&($("button.add-identifier",g).click(),$("li:first-child button.remove-identifier",g).css("display","none")),this.getComponent=function(){return{dom:g,fill:d,getData:e,validate:f,propertyObject:a,property:a.property}}}}(),function(){"use strict";mlab.pkg("blf.modules.customInputs"),blf.templates.require(["KeywordField","KeywordField.line"]),blf.modules.customInputs.KeywordField=function(a,b){function c(a){a=a||{};var c=$(blf.templates.get("KeywordField.line")({languages:k.map(function(a){return a.separator?{separator:!0}:{id:a.type_id,label:a.label||a.labels[b.get("assets_lang")]}})}));a.language?$("select.select-language",c).val(a.language):k.some(function(a){return a.type_id&&!$('option[value="'+a.type_id+'"]:selected',i).length?$("select.select-language",c).val(a.type_id):void 0},null),a.values&&$("textarea",c).val(a.values.join(", ")),$("select.select-language",c).change(e),$("ul.languages-list",i).append(c),d(),e()}function d(){$("li",i).length>=k.length-l?$("button.add-language",i).css("display","none"):$("button.add-language",i).css("display","")}function e(){var a=$("select.select-language",i);j={},a.each(function(){j[$(this).val()]=1}),$("option",i).attr("disabled",null),$("option.disabled",i).attr("disabled","true");for(var b in j)$('option[value="'+b+'"]:not(:selected)',i).attr("disabled","true")}function f(){var b=h();return!a.required||b&&b.length?($(".message",i).empty(),!0):($(".message",i).text(i18n.t("customInputs:KeywordField.errors.at_least_one")),!1)}function g(a){$("ul.languages-list",i).empty();(a||[]).forEach(c)}function h(){var a=[];return $("ul.languages-list > li",i).each(function(){var b=$(this),c=mlab.string.trim($("> textarea",b).val())||"";c=c.split(";"),1===c.length&&(c=c[0].split(",")),c=c.map(mlab.string.trim).filter(mlab.fn.id),c.length&&a.push({language:$("> select",b).val(),values:c})}),a.length?a:void 0}domino.module.call(this);var i,j={},k=blf.utils.extractMajors(b.get("lists").language||[]),l=k.filter(function(a){return a.separator}).length;window.setTimeout(function(){k.length||_self.dispatchEvent("loadList",{list:"language"})},0),i=$(blf.templates.get("KeywordField")({label:a.label||a.labels[b.get("assets_lang")]})),$("button.add-language",i).click(function(){c()}),i.click(function(a){var b=$(a.target),c=b.parents("li");c.length&&b.is("button.remove-language")&&(c.remove(),d(),e())}),this.triggers.events.listsUpdated=function(a){var b=a.get("lists").language||[];!(k||[]).length&&b.length&&(k=blf.utils.extractMajors(b),l=k.filter(function(a){return a.separator}).length,$("select.select-in-type",i).empty().append(getLineContent()))},this.getComponent=function(){return{dom:i,fill:g,getData:h,validate:f,propertyObject:a,property:a.property}}}}(),function(){"use strict";mlab.pkg("blf.modules.customInputs"),blf.templates.require(["LanguageValueField","LanguageValueField.line"]),blf.modules.customInputs.LanguageValueField=function(a,b){function c(a){a=a||{};var c=$(blf.templates.get("LanguageValueField.line")({languages:k.map(function(a){return a.separator?{separator:!0}:{id:a.type_id,label:a.label||a.labels[b.get("assets_lang")]}})}));a.language?$("select.select-language",c).val(a.language):k.some(function(a){return a.type_id&&!$('option[value="'+a.type_id+'"]:selected',i).length?$("select.select-language",c).val(a.type_id):void 0},null),a.value&&$("textarea",c).val(a.value),$("select.select-language",c).change(e),$("ul.languages-list",i).append(c),d(),e()}function d(){$("li",i).length>=k.length-l?$("button.add-language",i).css("display","none"):$("button.add-language",i).css("display","")}function e(){var a=$("select.select-language",i);j={},a.each(function(){j[$(this).val()]=1}),$("option",i).attr("disabled",null),$("option.disabled",i).attr("disabled","true");for(var b in j)$('option[value="'+b+'"]:not(:selected)',i).attr("disabled","true")}function f(){var b=h();return!a.required||b&&b.length?($(".message",i).empty(),!0):($(".message",i).text(i18n.t("customInputs:LanguageValueField.errors.at_least_one")),!1)}function g(a){$("ul.languages-list",i).empty();(a||[]).forEach(c)}function h(){var a=[];return $("ul.languages-list > li",i).each(function(){var b=$(this);a.push({language:$("> select",b).val(),value:$("> textarea",b).val()})}),a.length?a:void 0}domino.module.call(this);var i,j={},k=blf.utils.extractMajors(b.get("lists").language||[]),l=k.filter(function(a){return a.separator}).length;window.setTimeout(function(){k.length||_self.dispatchEvent("loadList",{list:"language"})},0),i=$(blf.templates.get("LanguageValueField")({label:a.label||a.labels[b.get("assets_lang")]})),$("button.add-language",i).click(function(){c()}),i.click(function(a){var b=$(a.target),c=b.parents("li");c.length&&b.is("button.remove-language")&&(c.remove(),d(),e())}),this.triggers.events.listsUpdated=function(a){var b=a.get("lists").language||[];!(k||[]).length&&b.length&&(k=blf.utils.extractMajors(b),l=k.filter(function(a){return a.separator}).length,$("select.select-in-type",i).empty().append(getLineContent()))},this.getComponent=function(){return{dom:i,fill:g,getData:h,validate:f,propertyObject:a,property:a.property}}}}(),function(){"use strict";mlab.pkg("blf.modules.customInputs"),blf.templates.require("StringField"),blf.modules.customInputs.StringField=function(a){function b(){f=$(blf.templates.get("StringField")({label:a.label}))}function c(a){$(".value",f).text(a)}function d(){return void 0}function e(){return!0}domino.module.call(this);var f;b(),this.getComponent=function(){return{dom:f,fill:c,getData:d,validate:e,propertyObject:a,property:a.property}}}}(),function(){"use strict";mlab.pkg("blf.modules.customInputs"),blf.templates.require(["TypeField","TypeField.line"]),blf.modules.customInputs.TypeField=function(a,b){function c(){return l.map(function(a){return a.separator?'<option class="disabled" disabled="disabled">---</option>':'<option value="'+a.type_id+'">'+a.label+"</option>"}).join()}function d(){!a.multiple&&$("li",j).length||$("li",j).length>=l.length-m?$("button.add-value",j).css("display","none"):$("button.add-value",j).css("display","")}function e(){var a=$("ul.values-list > li > select",j);k={},a.each(function(){k[$(this).val()]=1}),$("option",j).attr("disabled",null),$("option.disabled",j).attr("disabled","true");for(var b in k)$('option[value="'+b+'"]:not(:selected)',j).attr("disabled","true")}function f(a){var b=$(blf.templates.get("TypeField.line")({content:c()}));$("> select",b).val(a?a:l.reduce(function(a,b){return null!==a?a:b.type_id&&!$('option[value="'+b.type_id+'"]:selected',j).length?b.type_id:null},null)),$("select",b).change(e),$("ul.values-list",j).append(b),d(),e()}function g(a){$("ul.values-list",j).empty(),domino.struct.check("array",a)?a.map(f):a&&f(a)}function h(){var b,c;return a.multiple?(c=[],$("select",j).each(function(){c.push($(this).val())})):(b=$("select",j),b.length&&(c=b.first().val())),"array"!==domino.struct.get(c)||c.length?c:void 0}function i(){var b=h();return!a.required||b&&b.length?($(".message",j).empty(),!0):($(".message",j).text(i18n.t("customInputs:TypeField.errors.at_least_one")),!1)}domino.module.call(this);var j,k={},l=blf.utils.extractMajors(b.get("lists")[a.type_source]||[]),m=l.filter(function(a){return a.separator}).length,n=this;window.setTimeout(function(){l.length||n.dispatchEvent("loadList",{list:a.type_source})},0),j=$(blf.templates.get("TypeField")({label:a.label||a.labels[b.get("assets_lang")],multi:!a.only_one})),$("button.add-value",j).click(function(){f()}),j.click(function(a){var b=$(a.target),c=b.parents("ul.values-list > li");c.length&&b.is("button.remove-value")&&(c.remove(),d(),e())}),this.getComponent=function(){return{dom:j,fill:g,getData:h,validate:i,propertyObject:a,property:a.property}},this.triggers.events.listsUpdated=function(b){var d=b.get("lists")[a.type_source]||[];!(l||[]).length&&d.length&&(l=blf.utils.extractMajors(d),m=l.filter(function(a){return a.separator}).length,$("select.select-in-type",j).empty().append(c()))}}}(),function(){"use strict";mlab.pkg("blf.modules.customInputs"),blf.templates.require("YearRangeField"),blf.modules.customInputs.YearRangeField=function(a){function b(){f=$(blf.templates.get("YearRangeField")({label:a.label}))}function c(b,c){$(".date-from",f).val(c[a.property_begin]),$(".date-to",f).val(c[a.property_end])}function d(b){$(".date-from",f).val()&&(b[a.property_begin]=$(".date-from",f).val()),$(".date-to",f).val()&&(b[a.property_end]=$(".date-to",f).val())}function e(){var b={};return d(b),+b[a.property_begin]>+b[a.property_end]?($(".message",f).text(i18n.t("customInputs:YearRangeField.errors.wrong_order")),!1):($(".message",f).empty(),!0)}domino.module.call(this);var f;b(),this.getComponent=function(){return{dom:f,fill:c,getData:d,validate:e,propertyObject:a,property:a.property}}}}();